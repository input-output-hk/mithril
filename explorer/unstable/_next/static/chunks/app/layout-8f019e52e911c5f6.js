(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{506:e=>{"use strict";let t=e=>e/1e6,r=(e,t=2)=>e.toLocaleString(void 0,{maximumFractionDigits:t});function a(e){let t,r="cexplorer.io";switch(e){case"mainnet":t=`https://${r}`;break;case"preprod":t=`https://preprod.${r}`;break;case"preview":t=`https://preview.${r}`}return t}function o(e,t){let r=e.map(e=>e.party_id),a=t.map(e=>e.party_id);return{in:[...e.filter(e=>!a.includes(e.party_id))],out:[...t.filter(e=>!r.includes(e.party_id))]}}e.exports={checkUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},percent:function(e,t,r=0){return 0===t?"0":(e/t*100).toFixed(r)},formatStake:function(e){let a=t(e),o=[{suffix:"B",value:1e9},{suffix:"M",value:1e6},{suffix:"K",value:1e3},{suffix:"",value:1}].find(e=>Math.abs(a)>=e.value-.001);return o?`${r(a/o.value)}${o.suffix}₳`:`${r(a)}₳`},toAda:t,formatCurrency:r,formatBytes:function(e,t=2){if(0===e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(t<0?0:t))+" "+["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][r]},formatPartyId:function(e){return("string"==typeof e||e instanceof String)&&e.length>15?e.slice(0,10)+"…"+e.slice(-5):e},getCExplorerUrl:a,poolTickerCExplorerUrl:function(e,t){let r=a(e);return r?`${r}/pool/${t}`:void 0},formatProcessDuration:function(e){let t=performance.now()-e,r=Math.floor(t/6e4),a=Math.floor(t%6e4/1e3);return r>0?`${r} minutes and ${a} seconds`:`${a} seconds`},computeAggregatorNetworkFromUrl:function(e){let t=e.match(/aggregator\.(.*?)\.api/);return t&&t[1]?t[1]:null},computeInOutRegistrations:function(e,...t){let r={},a=e.registrations;for(let{registered_at:e,registrations:i}of t){let t=e+1,s=o(a,i);(s.in.length>0||s.out.length>0)&&(r[t]={in:s.in,out:s.out}),a=i}return r},dedupInOutRegistrations:function(e){let t={},r=[],a=[];for(let[o,i]of Object.entries(e).reverse()){let e={in:i.in.filter(e=>!a.includes(e.party_id)),out:i.out.filter(e=>!r.includes(e.party_id))};a.push(...i.out.map(e=>e.party_id)),r.push(...i.in.map(e=>e.party_id)),(e.in.length>0||e.out.length>0)&&(t[o]=e)}return t},compareRegistrations:o,getImmutableUrlFromTemplate:function(e,t){return e.replace("{immutable_file_number}",String(t).padStart(5,"0"))},parseSignedEntity:function(e){let t=Object.keys(e).at(0),r={name:t,fields:{}};return"MithrilStakeDistribution"===t||"CardanoStakeDistribution"===t?r.fields={epoch:e[t]}:"CardanoTransactions"===t?r.fields={epoch:e[t][0],block_number:e[t][1]}:r.fields=e[t]??{},r}}},592:(e,t,r)=>{"use strict";r.d(t,{CY:()=>c,JN:()=>u,Vf:()=>l,s_:()=>n,wm:()=>d});var a=r(3769),o=r(2842),i=r(1117),s=r.n(i);let n=(0,a.Z0)({name:"pools",initialState:{list:[]},reducers:{},extraReducers:e=>e.addCase(l.fulfilled,(e,t)=>{if(t.payload.keep_cached_data)return;let r=g(e,t.payload.aggregator);r?(r.network=t.payload.network,r.pools=t.payload.pools,r.date=t.payload.date):e.list.push({aggregator:t.payload.aggregator,date:t.payload.date,network:t.payload.network,pools:t.payload.pools})})}),l=(0,a.zD)("pools/updateForAggregator",(e,t)=>{let r=g(t.getState().pools,e),a=Date.now();return a-(r?.date??0)>216e5?s().fetchSignersTickers(e).then(t=>({aggregator:e,date:a,network:t.network,pools:t.signers??[]})):{keep_cached_data:!0}}),g=(e,t)=>e.list.find(e=>e.aggregator===t),c=(0,o.Mz)([e=>e.settings.selectedAggregator,e=>e.pools,(e,t)=>t],(e,t,r)=>{let a=g(t,e),o=a?.pools.find(e=>e.party_id===r);return{network:a?.network,...o}}),d=(0,o.Mz)([e=>e.settings.selectedAggregator,e=>e.pools],(e,t)=>g(t,e)),u=(0,o.Mz)([e=>e.settings.selectedAggregator,e=>e.pools],(e,t)=>{let r=g(t,e);return r?.network});n.reducer},733:()=>{},1117:(e,t,r)=>{"use strict";let{defaultAggregatorCapabilities:a}=r(4442);function o(e){return fetch(e,{headers:{"mithril-origin-tag":"EXPLORER"}})}e.exports={fetchAggregator:o,fetchAggregatorCapabilities:function(e){return o(e).then(e=>200===e.status?e.json():{}).then(e=>e?.capabilities??a).catch(e=>(console.error("Fetch aggregator capabilities error:",e),a))},fetchSignersTickers:function(e){return o(`${e}/signers/tickers`).then(e=>200===e.status?e.json():{}).catch(e=>{console.error("Fetch signers tickers error:",e)})},fetchEpochSettings:function(e){return o(`${e}/epoch-settings`).then(e=>200===e.status?e.json():{}).catch(e=>{console.error("Fetch epoch settings error:",e)})},fetchRegistrations:function(e,t){return o(`${e}/signers/registered/${t}`).then(e=>200===e.status?e.json():{}).catch(e=>{console.error("Fetch registrations error:",e)})}}},1344:()=>{},3087:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>h});var a=r(5155),o=r(4442),i=r(3769),s=r(592),n=r(8208),l=r(9648),g=r(506);let c="Explorer_State";var d=r(2834),u=r(3321),p=r(2115);function h({children:e}){var t,r,h,f;let m,b,v,_,y=(0,u.useSearchParams)().get(o.aggregatorSearchParam),[A]=(0,p.useState)((m=(0,i.Nc)(),(0,n.Oz)(m),(0,i.U1)({reducer:{settings:n.sI.reducer,pools:s.s_.reducer},preloadedState:(t=function(){if(localStorage){let e=localStorage.getItem(c);return e?JSON.parse(e):void 0}}(),{...t,settings:(r=t?.settings,h=(b=r??n.ue).availableAggregators,f=l.A,v=h.filter(e=>!f.includes(e)),_=[...f,...v],y&&(0,g.checkUrl)(y)?(_.includes(y)||_.push(y),b={...b,selectedAggregator:y,availableAggregators:_,canRemoveSelected:!l.A.includes(y)}):b={...b,availableAggregators:_},b)}),middleware:e=>e().prepend(m.middleware)})));return A.subscribe(()=>{var e;return e=A.getState(),void(localStorage&&localStorage.setItem(c,JSON.stringify(e)))}),(0,a.jsx)(d.Kq,{store:A,children:e})}},4442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{aggregatorSearchParam:()=>a,defaultAggregatorCapabilities:()=>i,signedEntityType:()=>o});let a="aggregator",o={MithrilStakeDistribution:"MithrilStakeDistribution",CardanoStakeDistribution:"CardanoStakeDistribution",CardanoImmutableFilesFull:"CardanoImmutableFilesFull",CardanoDb:"CardanoDatabase",CardanoTransactions:"CardanoTransactions"},i={signed_entity_types:[],cardano_transactions_prover:{max_hashes_allowed_by_request:100}}},6089:()=>{},6530:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6089,23)),Promise.resolve().then(r.t.bind(r,7598,23)),Promise.resolve().then(r.t.bind(r,8500,23)),Promise.resolve().then(r.t.bind(r,8437,23)),Promise.resolve().then(r.bind(r,9504)),Promise.resolve().then(r.t.bind(r,1344,23)),Promise.resolve().then(r.t.bind(r,733,23)),Promise.resolve().then(r.t.bind(r,9042,23)),Promise.resolve().then(r.bind(r,3087))},7598:()=>{},8208:(e,t,r)=>{"use strict";r.d(t,{CV:()=>_,Oz:()=>d,PY:()=>u,QB:()=>h,XN:()=>p,rT:()=>f,sI:()=>c,ue:()=>g,v:()=>v,z1:()=>b});var a=r(3769),o=r(1117),i=r.n(o),s=r(9648),n=r(506),l=r(4442);let g={updateInterval:void 0,refreshSeed:0,selectedAggregator:s.A[0],availableAggregators:s.A,aggregatorCapabilities:l.defaultAggregatorCapabilities,canRemoveSelected:!1},c=(0,a.Z0)({name:"settings",initialState:g,reducers:{setUpdateInterval:(e,t)=>{let r=t.payload;e.updateInterval=!Number.isNaN(r)&&Number.isInteger(r)?r:void 0},changeRefreshSeed:e=>{e.refreshSeed=Math.random()},selectAggregator:(e,t)=>{if(!(0,n.checkUrl)(t.payload))return e;let r=e.availableAggregators.includes(t.payload)?e.availableAggregators:[...e.availableAggregators,t.payload];return{...e,selectedAggregator:t.payload,availableAggregators:r,canRemoveSelected:!s.A.includes(t.payload)}},removeSelectedAggregator:e=>s.A.includes(e.selectedAggregator)?e:{...e,selectedAggregator:e.availableAggregators.at(0),availableAggregators:e.availableAggregators.filter(t=>t!==e.selectedAggregator),canRemoveSelected:!s.A.includes(e.availableAggregators.at(0))},updateSelectedAggregatorCapabilities:(e,t)=>({...e,aggregatorCapabilities:t.payload})}}),d=e=>{e.startListening({actionCreator:h,effect:async(e,t)=>{let r=e.payload;if(r){let e=await i().fetchAggregatorCapabilities(r);t.dispatch(m(e))}}})},{setUpdateInterval:u,changeRefreshSeed:p,selectAggregator:h,removeSelectedAggregator:f,updateSelectedAggregatorCapabilities:m}=c.actions,b=e=>e.settings.selectedAggregator,v=e=>e.settings?.aggregatorCapabilities??l.defaultAggregatorCapabilities,_=e=>e.settings?.aggregatorCapabilities?.signed_entity_types??[];c.reducer},9042:e=>{e.exports={container:"explorer_container__e4y3J",main:"explorer_main__72BOO",footer:"explorer_footer__NDYaK",title:"explorer_title__4AQZM",code:"explorer_code__d9zj2",logo:"explorer_logo__qsx9l"}},9504:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var a=r(9730),o=r.n(a),i=r(2115),s=r(8020),n=r(5155);let l=i.forwardRef(({bsPrefix:e,bg:t="primary",pill:r=!1,text:a,className:i,as:l="span",...g},c)=>{let d=(0,s.oU)(e,"badge");return(0,n.jsx)(l,{ref:c,...g,className:o()(i,d,r&&"rounded-pill",a&&`text-${a}`,t&&`bg-${t}`)})});l.displayName="Badge";let g=l},9648:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=["https://aggregator.release-mainnet.api.mithril.network/aggregator","https://aggregator.release-preprod.api.mithril.network/aggregator","https://aggregator.pre-release-preview.api.mithril.network/aggregator","https://aggregator.testing-preview.api.mithril.network/aggregator","http://localhost:8080/aggregator"]}},e=>{e.O(0,[456,559,104,101,500,441,794,358],()=>e(e.s=6530)),_N_E=e.O()}]);