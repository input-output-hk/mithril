(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{214:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>M});var t=s(5155),a=s(3321),i=s(2115),n=s(2834),l=s(7140),d=s(506),h=s(9853),g=s(8442),c=s(6072),o=s(9856),x=s(5894),u=s(9730),j=s.n(u),b=s(8020);let f=i.forwardRef(({bsPrefix:e,size:r,vertical:s=!1,className:a,role:i="group",as:n="div",...l},d)=>{let h=(0,b.oU)(e,"btn-group"),g=h;return s&&(g=`${h}-vertical`),(0,t.jsx)(n,{...l,ref:d,role:i,className:j()(a,g,r&&`${h}-${r}`)})});f.displayName="ButtonGroup";var p=s(6545),m=s(3888),v=s(8067),A=s(4442),k=s(592),S=s(7018),N=s(8028),w=s(2986),y=s(8278),E=s(1117);function M(){let e=(0,n.wA)(),r=(0,a.useSearchParams)(),[s,u]=(0,i.useState)(!0),[j,b]=(0,i.useState)(void 0),[m,M]=(0,i.useState)(void 0),[$,_]=(0,i.useState)(void 0),[C,R]=(0,i.useState)(void 0),[P,W]=(0,i.useState)(void 0),[T,B]=(0,i.useState)([]),[U,O]=(0,i.useState)({stakesBreakdown:{},signersWeight:{}});(0,i.useEffect)(()=>{let s,t=r.get(A.aggregatorSearchParam),a=r.get("epoch");M(t),(0,d.checkUrl)(t)?"latest"===a||Number.isInteger(Number(a))||(s="invalidEpoch"):s="invalidAggregatorUrl",void 0===s?((0,E.fetchRegistrations)(t,a).then(e=>{R(e.signing_at),_(e.registered_at),B(e.registrations),O({stakesBreakdown:(0,l.an)(e.registrations),signersWeight:(0,l.h1)(e.registrations)}),u(!1)}).catch(()=>{R(void 0),B([]),u(!1)}),(0,E.fetchEpochSettings)(t).then(e=>W(e?.epoch)).catch(()=>{W(void 0)}),e((0,k.Vf)(t))):b(s)},[r]);let I=(0,i.useCallback)(e=>{let r=new URLSearchParams;return r.set("aggregator",m),r.set("epoch",e),`/registrations?${r.toString()}`},[m]),F=I($-1),H=I(P),q=I($+1);if(void 0!==j){let e="";switch(j){case"invalidEpoch":e="The given epoch isn't an integer, please correct it and try again.";break;case"invalidAggregatorUrl":e="The given aggregator isn't a valid url, please correct it and try again.";break;default:e="Something went wrong"}return(0,t.jsxs)(h.A,{gap:3,children:[(0,t.jsx)("h2",{children:"Registrations"}),(0,t.jsxs)(g.A,{variant:"danger",children:[(0,t.jsx)(g.A.Heading,{children:"Oh snap! You got an error!"}),(0,t.jsx)("p",{children:e})]})]})}return(0,t.jsxs)(h.A,{gap:3,children:[(0,t.jsxs)("h2",{children:["Registrations"," ",(0,t.jsx)(w.A,{href:`${m}/signers/registered/${$}`,variant:"outline-light",size:"sm"})]}),(0,t.jsx)(c.A,{children:(0,t.jsx)(o.A,{children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Aggregator:"})}),(0,t.jsx)("td",{children:m})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Registration epoch:"})}),(0,t.jsx)("td",{children:$})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Signing at epoch:"})}),(0,t.jsx)("td",{children:C??"?"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Number of signers:"})}),(0,t.jsx)("td",{children:T?.length??0})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Total stakes:"})}),(0,t.jsx)("td",{children:(0,t.jsx)(N.A,{lovelace:T?.reduce((e,r)=>e+r.stake,0)??0})})]})]})})}),(0,t.jsx)(c.A,{children:Number.isInteger($)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{xs:12,sm:12,md:3,lg:2,className:"d-grid mb-1",children:(0,t.jsxs)(S.A,{href:H,disabled:void 0===P||P===$,children:["Current Cardano Epoch (",P,")"]})}),(0,t.jsx)(x.A,{xs:12,sm:12,md:6,lg:4,className:"d-grid mb-1",children:(0,t.jsxs)(f,{children:[(0,t.jsxs)(S.A,{href:F,children:["Previous Registration Epoch (",$-1,")"]}),(0,t.jsxs)(S.A,{href:q,disabled:P<=$,children:["Next Registration Epoch (",$+1,")"]})]})})]})}),s?(0,t.jsx)(p.A,{animation:"grow"}):void 0===T||0===T.length?(0,t.jsxs)(g.A,{variant:"info",children:[(0,t.jsxs)(g.A.Heading,{children:["No registrations for epoch ",$]}),(0,t.jsx)("p",{children:P===$?"The aggregator did not receive registrations yet for the current epoch.":P<$?"The epoch is in the future":"The aggregator may have pruned old registrations or wasn't running at this epoch."})]}):(0,t.jsxs)(c.A,{children:[(0,t.jsxs)(x.A,{xs:12,sm:12,md:7,children:[(0,t.jsx)("h3",{children:"Signers"}),(0,t.jsx)(y.A,{signers:T,displayIndexes:!0})]}),(0,t.jsx)(x.A,{xs:12,sm:12,md:5,children:(0,t.jsxs)(h.A,{gap:3,children:[(0,t.jsx)("h3",{children:"Stakes breakdown"}),(0,t.jsx)(v.yP,{data:U.stakesBreakdown}),(0,t.jsx)("h3",{children:"Signers weight"}),(0,t.jsx)(v.Fq,{data:U.signersWeight})]})})]})]})}m.t1.register(m.Bs,m.PP,m.kc,m.E8,m.hE,m.m_,m.s$),(0,l.W6)(m.t1)},2986:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});var t=s(5155);s(2115);var a=s(958),i=s(3427),n=s(8956);function l({tooltip:e="Raw JSON",color:r="black",...s}){return(0,t.jsx)(a.A,{overlay:(0,t.jsx)(i.A,{children:e}),children:(0,t.jsx)(n.A,{variant:"outline-secondary",target:"_blank",...s,children:(0,t.jsx)("i",{className:`bi bi-filetype-json text-${r}`})})})}},4338:(e,r,s)=>{Promise.resolve().then(s.bind(s,214))},7018:(e,r,s)=>{"use strict";s.d(r,{A:()=>n});var t=s(5155);s(2115);var a=s(8500),i=s.n(a);function n({href:e,children:r,className:s,disabled:a,variant:n="primary",...l}){return!0===a?s=`${s} disabled`:a=!1,(0,t.jsx)(i(),{href:e,"aria-disabled":a,className:`btn btn-${n} link-underline-opacity-0 ${s}`,...l,children:r})}},7140:(e,r,s)=>{"use strict";s.d(r,{W6:()=>n,an:()=>a,h1:()=>i});var t=s(506);function a(e){let r=(e??[]).map(e=>e.stake/1e12);return{labels:["< 1M₳","≥ 1M₳ < 10M₳","≥ 10M₳ < 25M₳","≥ 25M₳ < 50M₳","≥ 50M₳ < 75M₳","≥ 75M₳ < 100M₳","≥ 100M₳"],datasets:[{label:"Number of signers",data:[r.filter(e=>e<1).length,r.filter(e=>e>=1&&e<10).length,r.filter(e=>e>=10&&e<25).length,r.filter(e=>e>=25&&e<50).length,r.filter(e=>e>=50&&e<75).length,r.filter(e=>e>=75&&e<100).length,r.filter(e=>e>100).length]}]}}function i(e){let r=e??[];return{labels:r.map(e=>e.party_id),datasets:[{label:"Stake (₳)",data:r.map(e=>(0,t.toAda)(e.stake))}]}}function n(e){let r=["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],s=["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"];e.defaults.plugins.legend.display=!1,e.defaults.elements.arc.backgroundColor=r,e.defaults.elements.arc.borderColor=s,e.defaults.elements.arc.borderWidth=1,e.defaults.elements.bar.backgroundColor=r,e.defaults.elements.bar.borderColor=s,e.defaults.elements.bar.borderWidth=1}}},e=>{e.O(0,[647,101,678,500,844,278,441,794,358],()=>e(e.s=4338)),_N_E=e.O()}]);