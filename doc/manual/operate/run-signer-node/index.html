<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-maintained docs-doc-page docs-doc-id-manual/operate/run-signer-node" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Run a Mithril signer node | Mithril. A complete guide.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mithril.network/doc/manual/operate/run-signer-node"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:image" content="https://mithril.network/doc/img/logo.png"><meta data-rh="true" name="docusaurus_version" content="maintained"><meta data-rh="true" name="docusaurus_tag" content="docs-default-maintained"><meta data-rh="true" name="docsearch:version" content="maintained"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-maintained"><meta data-rh="true" property="og:title" content="Run a Mithril signer node | Mithril. A complete guide."><meta data-rh="true" name="description" content="For more information about the Mithril protocol, see the About Mithril section."><meta data-rh="true" property="og:description" content="For more information about the Mithril protocol, see the About Mithril section."><link data-rh="true" rel="icon" href="/doc/img/mithril-logo.svg"><link data-rh="true" rel="canonical" href="https://mithril.network/doc/manual/operate/run-signer-node"><link data-rh="true" rel="alternate" href="https://mithril.network/doc/manual/operate/run-signer-node" hreflang="en"><link data-rh="true" rel="alternate" href="https://mithril.network/doc/manual/operate/run-signer-node" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Operate","item":"https://mithril.network/doc/manual/operate/"},{"@type":"ListItem","position":2,"name":"Run a Mithril signer node","item":"https://mithril.network/doc/manual/operate/run-signer-node"}]}</script><link rel="alternate" type="application/rss+xml" href="/doc/dev-blog/rss.xml" title="Mithril. A complete guide. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/dev-blog/atom.xml" title="Mithril. A complete guide. Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4MB41WL2Z2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4MB41WL2Z2",{anonymize_ip:!0})</script>






<link rel="alternate" type="application/rss+xml" href="/doc/adr/rss.xml" title="Mithril. A complete guide. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/adr/atom.xml" title="Mithril. A complete guide. Atom Feed">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="https://plausible.io/js/script.js" defer="defer" data-domain="mithril.network"></script><link rel="stylesheet" href="/doc/assets/css/styles.a25f281a.css">
<script src="/doc/assets/js/runtime~main.bad1af15.js" defer="defer"></script>
<script src="/doc/assets/js/main.c6df415c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#2A598E;color:#f1f1f1" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Participate in Mithril Protocol’s Mainnet Beta! Follow our SPO on-boarding guide  <a rel="noopener noreferrer" href="https://mithril.network/doc/manual/operate/become-mithril-spo">here</a>!</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><header aria-label="Main" class="flex navbar tablet:py-[30px] !px-0 shadow-none z-50 border-b border-[#EAEAEB] pt-3 pb-4 tablet:px-2 navbar--fixed-top"><div class="w-full px-6"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/doc/"><div class="navbar__logo"><img src="/doc/img/mithril-logo-text.svg" alt="Mithril. A complete guide." class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doc/img/mithril-logo-text.svg" alt="Mithril. A complete guide." class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/doc/manual/welcome">User manual</a><a class="navbar__item navbar__link" href="/doc/mithril/intro">About Mithril</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/doc/manual/operate/run-signer-node">Current</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/doc/next/manual/operate/run-signer-node">Next 🚧</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/doc/manual/operate/run-signer-node">Current</a></li></ul></div><a href="https://mithril.network/explorer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Explorer</a><a class="navbar__item navbar__link" href="/doc/glossary">Glossary</a><a class="navbar__item navbar__link" href="/doc/dev-blog">Blog</a><a class="navbar__item navbar__link" href="/doc/adr">ADRs</a><div class="navbarSearchContainer_Bca1"></div><a href="https://github.com/input-output-hk/mithril/" target="_blank" rel="noopener noreferrer" class="hover:text-[var(--ifm-navbar-link-hover-color)] mx-3 py-1 laptop:flex hidden"><svg xmlns="http://www.w3.org/2000/svg" width="26" height="24" viewBox="0 0 26 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.241 0C6.45096 0 0.961914 5.49998 0.961914 12.3042C0.961914 17.7432 4.47894 22.3472 9.35798 23.9767C9.96799 24.0991 10.1914 23.7119 10.1914 23.3862C10.1914 23.1009 10.1713 22.1232 10.1713 21.1044C6.75559 21.8379 6.04429 19.6377 6.04429 19.6377C5.49536 18.2117 4.68202 17.8452 4.68202 17.8452C3.56405 17.0914 4.76346 17.0914 4.76346 17.0914C6.00358 17.1729 6.6543 18.3544 6.6543 18.3544C7.75191 20.2284 9.5206 19.6989 10.2321 19.3729C10.3337 18.5784 10.6592 18.0284 11.0048 17.7229C8.28048 17.4377 5.41418 16.3784 5.41418 11.6522C5.41418 10.3077 5.90178 9.20771 6.67441 8.35222C6.55251 8.04672 6.12548 6.78347 6.79656 5.09273C6.79656 5.09273 7.83334 4.76673 10.1711 6.35572C11.1719 6.08639 12.2041 5.94938 13.241 5.94823C14.2777 5.94823 15.3346 6.09097 16.3106 6.35572C18.6486 4.76673 19.6854 5.09273 19.6854 5.09273C20.3564 6.78347 19.9292 8.04672 19.8073 8.35222C20.6002 9.20771 21.0677 10.3077 21.0677 11.6522C21.0677 16.3784 18.2014 17.4172 15.4568 17.7229C15.9042 18.1099 16.2902 18.8432 16.2902 20.0044C16.2902 21.6544 16.2701 22.9787 16.2701 23.3859C16.2701 23.7119 16.4938 24.0991 17.1036 23.9769C21.9826 22.3469 25.4996 17.7432 25.4996 12.3042C25.5198 5.49998 20.0106 0 13.241 0Z" fill="currentColor"></path></svg></a><a href="https://discord.gg/5kaErDKDRq" target="_blank" rel="noopener noreferrer" class="hover:text-[var(--ifm-navbar-link-hover-color)] mx-3 py-1 laptop:flex hidden"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="18" viewBox="0 0 23 18"><path d="M19.4778 1.49632C18.0074 0.806713 16.4357 0.286253 14.7879 0C14.7626 0 14.7246 0 14.7119 0.0390345C14.5091 0.403356 14.2809 0.884782 14.1288 1.27513C12.3543 1.00189 10.6051 1.00189 8.8686 1.27513C8.71649 0.884782 8.47566 0.416368 8.27286 0.0390345C8.26019 0.0130115 8.22216 0 8.19681 0C6.54903 0.286253 4.9773 0.793701 3.51965 1.49632C3.50697 1.49632 3.4943 1.50933 3.4943 1.52234C0.50294 6.08938 -0.308275 10.5523 0.0973328 14.9632C0.0973328 14.9892 0.110008 15.0023 0.122683 15.0153C2.08734 16.4986 4.00131 17.3964 5.86457 17.9949C5.88992 17.9949 5.92794 17.9949 5.94062 17.9689C6.38425 17.3443 6.77718 16.6937 7.11941 16.0041C7.14476 15.9651 7.11941 15.9131 7.08139 15.9C6.4603 15.6528 5.86457 15.3536 5.2815 15.0283C5.2308 15.0023 5.2308 14.9372 5.2815 14.8982C5.40826 14.8071 5.52233 14.703 5.63641 14.6119C5.66176 14.5989 5.68711 14.5859 5.71246 14.6119C9.47701 16.3815 13.5584 16.3815 17.2723 14.6119C17.2976 14.6119 17.323 14.6119 17.3483 14.6119C17.4624 14.703 17.5892 14.8071 17.7032 14.8982C17.7413 14.9242 17.7413 15.0023 17.7032 15.0283C17.1328 15.3666 16.5371 15.6658 15.9034 15.9C15.8653 15.9131 15.84 15.9651 15.8653 16.0041C16.2076 16.6937 16.6005 17.3443 17.0441 17.9689C17.0568 17.9949 17.0948 18.0079 17.1202 17.9949C18.9961 17.3964 20.9101 16.4986 22.8747 15.0153C22.8874 15.0023 22.9001 14.9762 22.9001 14.9632C23.3817 9.86271 22.1015 5.4388 19.5031 1.52234C19.5031 1.50933 19.4904 1.49632 19.4778 1.49632ZM7.6898 12.2828C6.5617 12.2828 5.62374 11.2159 5.62374 9.90175C5.62374 8.58759 6.53635 7.52064 7.6898 7.52064C8.84325 7.52064 9.78121 8.6006 9.75586 9.90175C9.75586 11.2159 8.84325 12.2828 7.6898 12.2828ZM15.333 12.2828C14.2049 12.2828 13.2669 11.2159 13.2669 9.90175C13.2669 8.58759 14.1795 7.52064 15.333 7.52064C16.4864 7.52064 17.4244 8.6006 17.399 9.90175C17.399 11.2159 16.4864 12.2828 15.333 12.2828Z" fill="currentColor"></path></svg></a><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></header><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/manual/welcome">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/manual/getting-started/">Get started</a><button aria-label="Collapse sidebar category &#x27;Get started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/getting-started/prerequisites">Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/getting-started/network-configurations">Network configurations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/getting-started/bootstrap-cardano-node">Bootstrap a Cardano node</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/doc/manual/operate/">Operate</a><button aria-label="Collapse sidebar category &#x27;Operate&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/operate/become-mithril-spo">Become a Mithril SPO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doc/manual/operate/run-signer-node">Run a Mithril signer node</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/manual/develop/">Develop</a><button aria-label="Collapse sidebar category &#x27;Develop&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/doc/category/mithril-network-nodes">Mithril network nodes</a><button aria-label="Collapse sidebar category &#x27;Mithril network nodes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/develop/nodes/mithril-aggregator">Mithril aggregator node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/develop/nodes/mithril-signer">Mithril signer node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/develop/nodes/mithril-client">Mithril client node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/develop/nodes/mithril-client-library">Mithril client library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/develop/nodes/mithril-client-library-wasm">Mithril client library WASM</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/develop/run-mithril-devnet">Run a private network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/develop/protocol-simulation">Protocol simulation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/manual/develop/references">API references</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/input-output-hk/mithril/releases" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Release notes<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://discord.gg/5kaErDKDRq" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/doc/manual/operate/"><span>Operate</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Run a Mithril signer node</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Current</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Run a Mithril signer node</h1></header>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>For more information about the <strong>Mithril protocol</strong>, see the <a href="/doc/mithril/intro">About Mithril</a> section.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mithril-signer-deployment-model">Mithril signer deployment model<a href="#mithril-signer-deployment-model" class="hash-link" aria-label="Direct link to Mithril signer deployment model" title="Direct link to Mithril signer deployment model">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>In this guide, you will learn how to set up a <strong>Mithril signer</strong> within the stake pool operator (SPO) infrastructure both on Cardano <code>mainnet</code> and <code>testnet</code> environments:</p><ul>
<li>On <code>mainnet</code>, you <strong>must</strong> run the <strong>production</strong> deployment where the <strong>Mithril signer</strong> runs on the <strong>Cardano block producer</strong> machine and the <strong>Mithril relay</strong> runs on the <strong>Cardano relay</strong> machine. <strong>Note</strong> that you can run the <strong>production</strong> deployment on <code>testnet</code>.</li>
<li>You can also run <strong>naive</strong> deployment, where the <strong>Mithril signer</strong> runs on the <strong>Cardano relay</strong> machine. This is possible in the testnet environment only, and does not require setting up a <strong>Mithril relay</strong>.</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>In the current setup, you don&#x27;t need to install a Mithril aggregator.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The <strong>production</strong> deployment model is currently in the beta version.</p></div></div>
<p>Here is the schema of the <strong>production</strong> deployment on mainnet:
<a href="/doc/assets/files/signer-deployment-production-691bb17c165b4da09c46222bc71c06ac.jpg" target="_blank"><img decoding="async" loading="lazy" alt="Production Mithril Signer Deployment Model" src="/doc/assets/images/signer-deployment-production-691bb17c165b4da09c46222bc71c06ac.jpg" width="2208" height="452" class="img_ev3q"></a></p>
<p>and the schema of the <strong>naive</strong> deployment specifically for <code>testnets</code>:
<a href="/doc/assets/files/signer-deployment-naive-6f2cc44fb5738b30cc3b5c370042845a.jpg" target="_blank"><img decoding="async" loading="lazy" alt="Naive Mithril Signer Deployment Model" src="/doc/assets/images/signer-deployment-naive-6f2cc44fb5738b30cc3b5c370042845a.jpg" width="2209" height="452" class="img_ev3q"></a></p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>On <code>mainnet</code>, you must <strong>never</strong> copy the <code>KES secret key</code> from the <strong>Cardano block producer</strong> machine!</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mithril-keys-certification">Mithril keys certification<a href="#mithril-keys-certification" class="hash-link" aria-label="Direct link to Mithril keys certification" title="Direct link to Mithril keys certification">​</a></h2>
<p>The <strong>Mithril signer</strong> uses your Cardano <code>operational certificate</code> and <code>KES secret key</code> files which enable:</p>
<ul>
<li>Automatic computation of the <code>PoolId</code></li>
<li>Verification of your <code>PoolId</code> ownership and the associated stake used by the Mithril protocol</li>
<li>Verification of your Mithril <code>signer secret key</code> ownership, which allows you to participate in the multi-signature process for certificate production on the Mithril network.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mithril-signer-footprint">Mithril signer footprint<a href="#mithril-signer-footprint" class="hash-link" aria-label="Direct link to Mithril signer footprint" title="Direct link to Mithril signer footprint">​</a></h2>
<p>The <strong>Mithril signer</strong> has been designed to have the lowest footprint possible in terms of CPU, memory, disk i/o and storage.
Thus, there are no extra requirements on the recommended hardware for running a Cardano stake pool, as detailed in this <a href="https://developers.cardano.org/docs/operate-a-stake-pool/hardware-requirements" target="_blank" rel="noopener noreferrer">guide</a>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Here are some figures about the Mithril signer node running on Cardano <code>mainnet</code>:</p><ul>
<li>It is <strong>idle</strong> most of the time with a very low <strong>CPU</strong> usage of less than <code>5%</code></li>
<li>It uses less than <code>200 MB</code> of <strong>resident memory</strong></li>
<li>It sends a <strong>new signature</strong> to the aggregator roughly every <code>10 minutes</code> and a <strong>new registration</strong> every <code>5 days</code> (<code>&lt;1 MB</code> per day)
When launched for the <strong>first time</strong>, a <strong>pre-loading</strong> phase occurs, during which the Cardano transactions are imported with a spike of <code>50-70%</code> CPU on one core for <code>~5 hours</code></li>
<li>When signing for the <strong>first time</strong>, the Cardano database digest cache needs to be built with a spike of <code>50-70%</code> CPU on one core for <code>~1 hour</code></li>
<li>Also, the full Cardano database files will be <strong>read from disk once</strong> during this cache building process</li>
<li>Only <strong>stake distributions</strong>, <strong>Mithril keys</strong>, and some <strong>cache</strong> (for the <strong>Cardano database</strong> and <strong>Cardano transactions</strong>) are stored on the disk (<code>&lt;200 MB</code>).</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-transactions-certification-footprint">Cardano transactions certification footprint<a href="#cardano-transactions-certification-footprint" class="hash-link" aria-label="Direct link to Cardano transactions certification footprint" title="Direct link to Cardano transactions certification footprint">​</a></h3>
<p>Here is a detailed view of the impact of the signature of the Cardano transactions (the most resource-intensive part of Mithril) on the SPO infrastructure on the <code>mainnet</code>:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cpu">CPU<a href="#cpu" class="hash-link" aria-label="Direct link to CPU" title="Direct link to CPU">​</a></h4>
<p><a href="/doc/assets/files/cardano-transaction-signer-cpu-cf28c3fd8ce40f5e5a38f70eeddd39c0.png" target="_blank"><img decoding="async" loading="lazy" alt="Cardano Transaction Signer CPU" src="/doc/assets/images/cardano-transaction-signer-cpu-cf28c3fd8ce40f5e5a38f70eeddd39c0.png" width="1675" height="751" class="img_ev3q"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="memory">Memory<a href="#memory" class="hash-link" aria-label="Direct link to Memory" title="Direct link to Memory">​</a></h4>
<p><a href="/doc/assets/files/cardano-transaction-signer-res-memory-feffbc7b136f8e1eaa387375d4342123.png" target="_blank"><img decoding="async" loading="lazy" alt="Cardano Transaction Signer CPU" src="/doc/assets/images/cardano-transaction-signer-res-memory-feffbc7b136f8e1eaa387375d4342123.png" width="1675" height="751" class="img_ev3q"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="disk">Disk<a href="#disk" class="hash-link" aria-label="Direct link to Disk" title="Direct link to Disk">​</a></h4>
<p><a href="/doc/assets/files/cardano-transaction-signer-disk-usage-432e8b0e75e95e940fa9f95c4966aca9.png" target="_blank"><img decoding="async" loading="lazy" alt="Cardano Transaction Signer CPU" src="/doc/assets/images/cardano-transaction-signer-disk-usage-432e8b0e75e95e940fa9f95c4966aca9.png" width="1675" height="751" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Note that this guide works on a Linux machine only.</p></div></div>
<ul>
<li>
<p>To operate a <strong>Cardano node</strong> as a <strong>stake pool</strong>, you need:</p>
<ul>
<li>The pool&#x27;s <code>operational certificate</code></li>
<li>The pool&#x27;s <code>KES secret key</code></li>
</ul>
</li>
<li>
<p>To access the file system of the <strong>Cardano block producer</strong> node for <strong>production</strong> deployment (or of the <strong>Cardano relay</strong> node for <strong>naive</strong> deployment), you will need the following permissions:</p>
<ul>
<li>Read rights on the <code>Database</code> folder (specified by the <code>--database-path</code> setting of the <strong>Cardano node</strong>)</li>
<li>Read and write rights on the <code>Inter Process Communication</code> file (typically defined by the <code>CARDANO_NODE_SOCKET_PATH</code> environment variable used to launch the <strong>Cardano node</strong>)</li>
</ul>
</li>
<li>
<p>Install a recent version of <a href="https://github.com/IntersectMBO/cardano-node/releases/tag/8.9.1" target="_blank" rel="noopener noreferrer"><code>cardano-cli</code></a> (version 8.9.1+)</p>
</li>
<li>
<p>Install a correctly configured Rust toolchain (latest stable version); you can follow the instructions provided <a href="https://www.rust-lang.org/learn/get-started" target="_blank" rel="noopener noreferrer">here</a></p>
</li>
<li>
<p>Install build tools <code>build-essential</code> and <code>m4</code>; for example, on Ubuntu/Debian/Mint, run <code>sudo apt install build-essential m4</code></p>
</li>
<li>
<p>Install OpenSSL development libraries; for example, on Ubuntu/Debian/Mint, run <code>apt install libssl-dev</code></p>
</li>
<li>
<p>Install a recent version of <code>jq</code> (version 1.6+) by running <code>apt install jq</code></p>
</li>
<li>
<p>Only for the <strong>production</strong> deployment, install a recent version of <a href="http://www.squid-cache.org/" target="_blank" rel="noopener noreferrer"><code>squid-cache</code></a> (version 6.12+).</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-the-mithril-signer-node">Set up the Mithril signer node<a href="#set-up-the-mithril-signer-node" class="hash-link" aria-label="Direct link to Set up the Mithril signer node" title="Direct link to Set up the Mithril signer node">​</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><ul>
<li>
<p>For <strong>production</strong> deployment, the <strong>Mithril signer</strong> setup is performed on the <strong>Cardano block producer</strong> machine</p>
</li>
<li>
<p>For <strong>naive</strong> deployment, the <strong>Mithril signer</strong> setup is performed on the <strong>Cardano relay</strong> machine.</p>
</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Compare the version of your Cardano node with the minimum supported versions listed in the <a href="https://github.com/input-output-hk/mithril/blob/main/networks.json" target="_blank" rel="noopener noreferrer"><code>networks.json</code></a> file to verify its compatibility with the Mithril signer.</p><p>First, check the version of your Cardano node by running the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cardano-node </span><span class="token parameter variable" style="color:#36acaa">--version</span><br></span></code></pre></div></div><p>Then, refer to the minimum supported versions listed in the the <a href="https://github.com/input-output-hk/mithril/blob/main/networks.json" target="_blank" rel="noopener noreferrer"><code>networks.json</code></a> file.</p><p>You can also fetch the minimum supported version for your network using the command below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-O</span><span class="token plain"> - https://raw.githubusercontent.com/input-output-hk/mithril/main/networks.json </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> jq </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;.&quot;**YOUR_CARDANO_NETWORK**&quot;.&quot;cardano-minimum-version&quot;.&quot;mithril-signer&quot;&#x27;</span><br></span></code></pre></div></div><p>Here is an example for <code>preprod</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-O</span><span class="token plain"> - https://raw.githubusercontent.com/input-output-hk/mithril/main/networks.json </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> jq </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;.&quot;preprod&quot;.&quot;cardano-minimum-version&quot;.&quot;mithril-signer&quot;&#x27;</span><br></span></code></pre></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-your-own-executable">Building your own executable<a href="#building-your-own-executable" class="hash-link" aria-label="Direct link to Building your own executable" title="Direct link to Building your own executable">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="download-the-source-file">Download the source file<a href="#download-the-source-file" class="hash-link" aria-label="Direct link to Download the source file" title="Direct link to Download the source file">​</a></h4>
<p>To download the source from GitHub (HTTPS), run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/input-output-hk/mithril.git</span><br></span></code></pre></div></div>
<p>Or (SSH):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone git@github.com:input-output-hk/mithril.git</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="build-the-mithril-signer-binary">Build the Mithril signer binary<a href="#build-the-mithril-signer-binary" class="hash-link" aria-label="Direct link to Build the Mithril signer binary" title="Direct link to Build the Mithril signer binary">​</a></h4>
<p>First, switch to build a branch/tag:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># **YOUR_BUILD_BRANCH_OR_TAG** depends on the Mithril network you target,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># please refer to the **Build from** column of the **Mithril networks** section</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout **YOUR_BUILD_BRANCH_OR_TAG**</span><br></span></code></pre></div></div>
<p>Then, change the directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> mithril/mithril-signer</span><br></span></code></pre></div></div>
<p>Run tests (optional):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token builtin class-name">test</span><br></span></code></pre></div></div>
<p>Finally, build the executable:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> build</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="download-the-pre-built-binary">Download the pre-built binary<a href="#download-the-pre-built-binary" class="hash-link" aria-label="Direct link to Download the pre-built binary" title="Direct link to Download the pre-built binary">​</a></h3>
<p>You can install a the <strong>latest</strong> released binary of the <strong>mithril-signer</strong> by running this one line command (<em>replace <strong>YOUR_PATH</strong> with your installation path</em>):</p>
<pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><p>curl --proto &#x27;=https&#x27; --tlsv1.2 -sSf
<a href="https://raw.githubusercontent.com/input-output-hk/mithril/refs/heads/main/mithril-install.sh" target="_blank" rel="noopener noreferrer">https://raw.githubusercontent.com/input-output-hk/mithril/refs/heads/main/mithril-install.sh</a>
| sh -s -- -c <!-- -->mithril-signer<!-- --> -d latest -p <strong>YOUR_PATH</strong></p></code></pre>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can also install the <strong>mithril-signer</strong> binary for other distributions:</p><ul>
<li>use <code>-d unstable</code> for the <strong>unstable</strong> version</li>
<li>use <code>-d **DISTRIBUTION_VERSION**</code> for a specific distribution (e.g. <code>-d 2445.0</code>)</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The Linux binaries target <code>glibc</code>, and have a minimum requirement of <code>glibc 2.35</code> (compatible with <code>Ubuntu 22.04</code>
or <code>Debian 12 - Bookworm</code>).</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verifying-the-binary">Verifying the binary<a href="#verifying-the-binary" class="hash-link" aria-label="Direct link to Verifying the binary" title="Direct link to Verifying the binary">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="verify-the-version-of-the-binary">Verify the version of the binary<a href="#verify-the-version-of-the-binary" class="hash-link" aria-label="Direct link to Verify the version of the binary" title="Direct link to Verify the version of the binary">​</a></h4>
<p>You can check that the Mithril signer binary is running the correct version by running:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./mithril-signer </span><span class="token parameter variable" style="color:#36acaa">-V</span><br></span></code></pre></div></div>
<p>You should see something like:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mithril-signer </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">.0</span><br></span></code></pre></div></div>
<p>⚠️<!-- --> Please verify that the displayed version matches the version described in the release/pre-release notes (refer to the <strong>Build from</strong> column in the <strong>Mithril networks</strong> section).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="verify-the-build">Verify the build<a href="#verify-the-build" class="hash-link" aria-label="Direct link to Verify the build" title="Direct link to Verify the build">​</a></h4>
<p>Check that the Mithril signer binary is working correctly by running the help function:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./mithril-signer </span><span class="token parameter variable" style="color:#36acaa">-h</span><br></span></code></pre></div></div>
<p>You should see:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">An implementation of a Mithril signer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: mithril-signer </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OPTIONS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -r, --run-mode </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">RUN_MODE</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Run Mode </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">env: </span><span class="token assign-left variable" style="color:#36acaa">RUN_MODE</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">default: dev</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v, --verbose</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Verbosity level, </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v</span><span class="token plain"> to increase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -c, --configuration-dir </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">CONFIGURATION_DIR</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Directory where the configuration </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> is located </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">default: ./config</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --disable-digests-cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Disable immutables digests cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --reset-digests-cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          If </span><span class="token builtin class-name">set</span><span class="token plain"> the existing immutables digests cache will be reset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h, </span><span class="token parameter variable" style="color:#36acaa">--help</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Print </span><span class="token builtin class-name">help</span><span class="token plain"> information </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">use </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable parameter variable" style="color:#36acaa">--help</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">more</span><span class="token plain"> detail</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -V, </span><span class="token parameter variable" style="color:#36acaa">--version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Print version information</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you wish to delve deeper, you can access logs at various levels from the Mithril signer:</p><ul>
<li>Add <code>-v</code> for some logs (WARN)</li>
<li>Add <code>-vv</code> for more logs (INFO)</li>
<li>Add <code>-vvv</code> for even more logs (DEBUG)</li>
<li>Add <code>-vvvv</code> for all logs (TRACE).</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-service">Installing the service<a href="#installing-the-service" class="hash-link" aria-label="Direct link to Installing the service" title="Direct link to Installing the service">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="move-the-executable">Move the executable<a href="#move-the-executable" class="hash-link" aria-label="Direct link to Move the executable" title="Direct link to Move the executable">​</a></h4>
<p>To move the executable to /opt/mithril, run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /opt/mithril</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> mithril-signer /opt/mithril</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-the-service">Set up the service<a href="#set-up-the-service" class="hash-link" aria-label="Direct link to Set up the service" title="Direct link to Set up the service">​</a></h4>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><ul>
<li>
<p><code>User=cardano</code>:
Replace this value with the correct user. We assume that the user used to run the <strong>Cardano node</strong> is <code>cardano</code>. The <strong>Mithril signer</strong> must imperatively run with the same user.</p>
</li>
<li>
<p>In the <code>/opt/mithril/mithril-signer.env</code> env file:</p>
<ul>
<li><code>KES_SECRET_KEY_PATH=/cardano/keys/kes.skey</code>: replace <code>/cardano/keys/kes.skey</code> with the path to your Cardano <code>KES secret key</code> file</li>
<li><code>OPERATIONAL_CERTIFICATE_PATH=/cardano/cert/opcert.cert</code>: replace <code>/cardano/cert/opcert.cert</code> with the path to your Cardano <code>operational certificate</code> file</li>
<li><code>DB_DIRECTORY=/cardano/db</code>: replace <code>/cardano/db</code> with the path to the database folder of the <strong>Cardano node</strong> (the one in <code>--database-path</code>)</li>
<li><code>CARDANO_NODE_SOCKET_PATH=/cardano/ipc/node.socket</code>: replace with the path to the IPC file (<code>CARDANO_NODE_SOCKET_PATH</code> env var)</li>
<li><code>CARDANO_CLI_PATH=/app/bin/cardano-cli</code>: replace with the path to the <code>cardano-cli</code> executable</li>
<li><code>DATA_STORES_DIRECTORY=/opt/mithril/stores</code>: replace with the path to a folder where the <strong>Mithril signer</strong> will store its data (eg, <code>/opt/mithril/stores</code>)</li>
<li><code>STORE_RETENTION_LIMIT</code>: if set, this will limit the number of records in some internal stores (5 is a good fit)</li>
<li><code>ERA_READER_ADAPTER_TYPE=cardano-chain</code>: replace <code>cardano-chain</code> with the era reader adapter type used in your Mithril network</li>
<li><code>ERA_READER_ADAPTER_PARAMS={&quot;address&quot;: &quot;...&quot;, &quot;verification_key&quot;: &quot;...&quot;}</code>: replace <code>{&quot;address&quot;: &quot;...&quot;, &quot;verification_key&quot;: &quot;...&quot;}</code> with the era reader parameters that you need to compute by running the command <code>jq -nc --arg address $(wget -q -O - **YOUR_ERA_READER_ADDRESS**) --arg verification_key $(wget -q -O - **YOUR_ERA_READER_VERIFICATION_KEY**) &#x27;{&quot;address&quot;: $address, &quot;verification_key&quot;: $verification_key}&#x27;</code></li>
<li><code>RELAY_ENDPOINT=http://192.168.1.50:3132</code> <strong>(optional)</strong>: this is the endpoint of the <strong>Mithril relay</strong>, which is required for <strong>production</strong> deployment only. For <strong>naive</strong> deployment, do not set this variable in your environment file.</li>
</ul>
</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an <strong>example</strong> set of values for <strong>release-preprod</strong> that will be used in this guide in the <strong>tip</strong> boxes to illustrate some commands:</p><ul>
<li><strong>YOUR_KES_SECRET_KEY_PATH</strong>: <code>/cardano/keys/kes.skey</code></li>
<li><strong>YOUR_OPERATIONAL_CERTIFICATE_PATH</strong>: <code>/cardano/keys/node.cert</code></li>
<li><strong>YOUR_CARDANO_NETWORK</strong>: <code>preprod</code></li>
<li><strong>YOUR_AGGREGATOR_ENDPOINT</strong>: <code>https://aggregator.release-preprod.api.mithril.network/aggregator</code></li>
<li><strong>YOUR_ERA_READER_ADAPTER_TYPE</strong>: <code>cardano-chain</code></li>
<li><strong>YOUR_ERA_READER_ADAPTER_PARAMS</strong>: <code>{&quot;address&quot;: &quot;addr_test1qpkyv2ws0deszm67t840sdnruqgr492n80g3y96xw3p2ksk6suj5musy6w8lsg3yjd09cnpgctc2qh386rtxphxt248qr0npnx&quot;, &quot;verification_key&quot;: &quot;5b35352c3232382c3134342c38372c3133382c3133362c34382c382c31342c3138372c38352c3134382c39372c3233322c3235352c3232392c33382c3234342c3234372c3230342c3139382c31332c33312c3232322c32352c3136342c35322c3130322c39312c3132302c3230382c3134375d&quot;}</code></li>
<li><strong>YOUR_RELAY_ENDPOINT</strong>: <code>192.168.1.50</code></li>
<li><strong>YOUR_RELAY_LISTENING_PORT</strong>: <code>3132</code></li>
<li><strong>YOUR_BLOCK_PRODUCER_INTERNAL_IP</strong>: <code>192.168.1.75</code></li>
<li><strong>YOUR_SIGNER_LOGS_PATH</strong>: <code>/var/log/syslog</code></li>
<li><strong>YOUR_PARTY_ID</strong>: <code>pool1hp72sauk0g0yqm4dzllz0pz6j93gewhllkzphn4hykkfmne43y</code></li>
</ul></div></div>
<p>First, create an environment file that the service will use:</p>
<ul>
<li>for <strong>production</strong> deployment:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/mithril/mithril-signer.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">KES_SECRET_KEY_PATH=**YOUR_KES_SECRET_KEY_PATH**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">OPERATIONAL_CERTIFICATE_PATH=**YOUR_OPERATIONAL_CERTIFICATE_PATH**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">NETWORK=**YOUR_CARDANO_NETWORK**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">AGGREGATOR_ENDPOINT=**YOUR_AGGREGATOR_ENDPOINT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RUN_INTERVAL=60000</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DB_DIRECTORY=/cardano/db</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_NODE_SOCKET_PATH=/cardano/ipc/node.socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_CLI_PATH=/app/bin/cardano-cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DATA_STORES_DIRECTORY=/opt/mithril/stores</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">STORE_RETENTION_LIMIT=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_TYPE=**YOUR_ERA_READER_ADAPTER_TYPE**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_PARAMS=**YOUR_ERA_READER_ADAPTER_PARAMS**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RELAY_ENDPOINT=**YOUR_RELAY_ENDPOINT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>release-preprod</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/mithril/mithril-signer.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">KES_SECRET_KEY_PATH=/cardano/keys/kes.skey</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">OPERATIONAL_CERTIFICATE_PATH=/cardano/keys/node.cert</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">NETWORK=preprod</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">AGGREGATOR_ENDPOINT=https://aggregator.release-preprod.api.mithril.network/aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RUN_INTERVAL=60000</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DB_DIRECTORY=/cardano/db</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_NODE_SOCKET_PATH=/cardano/ipc/node.socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_CLI_PATH=/app/bin/cardano-cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DATA_STORES_DIRECTORY=/opt/mithril/stores</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">STORE_RETENTION_LIMIT=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_TYPE=cardano-chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_PARAMS={&quot;address&quot;: &quot;addr_test1qpkyv2ws0deszm67t840sdnruqgr492n80g3y96xw3p2ksk6suj5musy6w8lsg3yjd09cnpgctc2qh386rtxphxt248qr0npnx&quot;, &quot;verification_key&quot;: &quot;5b35352c3232382c3134342c38372c3133382c3133362c34382c382c31342c3138372c38352c3134382c39372c3233322c3235352c3232392c33382c3234342c3234372c3230342c3139382c31332c33312c3232322c32352c3136342c35322c3130322c39312c3132302c3230382c3134375d&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RELAY_ENDPOINT=http://192.168.1.50:3132</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<ul>
<li>for <strong>naive</strong> deployment:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/mithril/mithril-signer.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">KES_SECRET_KEY_PATH=**YOUR_KES_SECRET_KEY_PATH**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">OPERATIONAL_CERTIFICATE_PATH=**YOUR_OPERATIONAL_CERTIFICATE_PATH**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">NETWORK=**YOUR_CARDANO_NETWORK**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">AGGREGATOR_ENDPOINT=**YOUR_AGGREGATOR_ENDPOINT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RUN_INTERVAL=60000</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DB_DIRECTORY=/cardano/db</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_NODE_SOCKET_PATH=/cardano/ipc/node.socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_CLI_PATH=/app/bin/cardano-cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DATA_STORES_DIRECTORY=/opt/mithril/stores</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">STORE_RETENTION_LIMIT=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_TYPE=**YOUR_ERA_READER_ADAPTER_TYPE**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_PARAMS=**YOUR_ERA_READER_ADAPTER_PARAMS**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>release-preprod</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/mithril/mithril-signer.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">KES_SECRET_KEY_PATH=/cardano/keys/kes.skey</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">OPERATIONAL_CERTIFICATE_PATH=/cardano/keys/node.cert</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">NETWORK=preprod</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">AGGREGATOR_ENDPOINT=https://aggregator.release-preprod.api.mithril.network/aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RUN_INTERVAL=60000</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DB_DIRECTORY=/cardano/db</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_NODE_SOCKET_PATH=/cardano/ipc/node.socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_CLI_PATH=/app/bin/cardano-cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DATA_STORES_DIRECTORY=/opt/mithril/stores</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">STORE_RETENTION_LIMIT=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_TYPE=cardano-chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_PARAMS={&quot;address&quot;: &quot;addr_test1qpkyv2ws0deszm67t840sdnruqgr492n80g3y96xw3p2ksk6suj5musy6w8lsg3yjd09cnpgctc2qh386rtxphxt248qr0npnx&quot;, &quot;verification_key&quot;: &quot;5b35352c3232382c3134342c38372c3133382c3133362c34382c382c31342c3138372c38352c3134382c39372c3233322c3235352c3232392c33382c3234342c3234372c3230342c3139382c31332c33312c3232322c32352c3136342c35322c3130322c39312c3132302c3230382c3134375d&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<p>Then, create a <code>/etc/systemd/system/mithril-signer.service</code> description file for the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /etc/systemd/system/mithril-signer.service &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Description=Mithril signer service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">StartLimitIntervalSec=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RestartSec=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">User=cardano</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EnvironmentFile=/opt/mithril/mithril-signer.env</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ExecStart=/opt/mithril/mithril-signer -vvv</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">WantedBy=multi-user.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<p>Reload the service configuration (optional):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span></code></pre></div></div>
<p>Then, start the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start mithril-signer</span><br></span></code></pre></div></div>
<p>Register the service to start on boot:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> mithril-signer</span><br></span></code></pre></div></div>
<p>Monitor the status of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status mithril-signer.service</span><br></span></code></pre></div></div>
<p>Finally, monitor the logs of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /var/log/syslog </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> mithril-signer</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activate-prometheus-endpoint">Activate Prometheus endpoint<a href="#activate-prometheus-endpoint" class="hash-link" aria-label="Direct link to Activate Prometheus endpoint" title="Direct link to Activate Prometheus endpoint">​</a></h3>
<p>The Mithril signer node can expose basic metrics on a Prometheus endpoint, which is not activated by default.</p>
<table><thead><tr><th>Metrics</th><th>Description</th></tr></thead><tbody><tr><td><strong>mithril_signer_signer_registration_success_since_startup</strong></td><td>Number of successful signer registrations since startup on a Mithril signer node</td></tr><tr><td><strong>mithril_signer_signer_registration_total_since_startup</strong></td><td>Number of signer registrations since startup on a Mithril signer node</td></tr><tr><td><strong>mithril_signer_signer_registration_success_last_epoch</strong></td><td>Latest epoch at which signer successfully registered on a Mithril signer node</td></tr><tr><td><strong>mithril_signer_signature_registration_success_since_startup</strong></td><td>Number of successful signature registrations since startup on a Mithril signer node</td></tr><tr><td><strong>mithril_signer_signature_registration_total_since_startup</strong></td><td>Number of signature registrations since startup on a Mithril signer node</td></tr><tr><td><strong>mithril_signer_signature_registration_success_last_epoch</strong></td><td>Latest epoch at which signature successfully registered on a Mithril signer node</td></tr><tr><td><strong>mithril_signer_runtime_cycle_success_since_startup</strong></td><td>Number of successful runtime cycles since startup on a Mithril signer node</td></tr><tr><td><strong>mithril_signer_runtime_cycle_total_since_startup</strong></td><td>Number of runtime cycles since startup on a Mithril signer node</td></tr></tbody></table>
<p>To expose metrics on the endpoint, append the following environment variable to your environment file. In that case, the metrics server will listen on the <code>9090</code> port:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> &#x27;cat </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /opt/mithril/mithril-signer.env </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ENABLE_METRICS_SERVER=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain">`</span><br></span></code></pre></div></div>
<p>You can also specify a custom listen IP address and port for the metrics server:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> &#x27;cat </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /opt/mithril/mithril-signer.env </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ENABLE_METRICS_SERVER=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">METRICS_SERVER_IP=**YOUR_METRICS_SERVER_IP**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">METRICS_SERVER_PORT=**YOUR_METRICS_SERVER_PORT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain">`</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example that reproduces the default configuration for the Prometheus server:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> &#x27;cat </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /opt/mithril/mithril-signer.env </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ENABLE_METRICS_SERVER=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">METRICS_SERVER_IP=0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">METRICS_SERVER_PORT=9090</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain">`</span><br></span></code></pre></div></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>When activated, the metrics endpoint will be accessible to the <code>http://**YOUR_METRICS_SERVER_IP**:**YOUR_METRICS_SERVER_PORT**/metrics</code> location, which translates to <a href="http://0.0.0.0:9090/metrics" target="_blank" rel="noopener noreferrer"><code>http://0.0.0.0:9090/metrics</code></a> with the default configuration.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Additionally, a <strong>Grafana template</strong> has been created to easily set up a dashboard for this Prometheus endpoint (ID 20776): <a href="https://grafana.com/grafana/dashboards/20776-mithril-signer/" target="_blank" rel="noopener noreferrer">https://grafana.com/grafana/dashboards/20776-mithril-signer/</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rotating-the-kes-keys">Rotating the KES keys<a href="#rotating-the-kes-keys" class="hash-link" aria-label="Direct link to Rotating the KES keys" title="Direct link to Rotating the KES keys">​</a></h3>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>When the KES keys expire, the Mithril signer cannot register with the Mithril protocol.</p></div></div>
<p>After rotating the KES keys on your Cardano block producer, we recommend following this upgrade procedure for your Mithril signer node:</p>
<ol>
<li>Update the <code>KES_SECRET_KEY_PATH</code> entry of your environment file to reflect the location of the <strong>new KES secret key file</strong></li>
<li>Update the <code>OPERATIONAL_CERTIFICATE_PATH</code> entry of your environment file to reflect the location of the <strong>new operational certificate file</strong></li>
<li>Restart your Mithril signer service with the following command:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart mithril-signer</span><br></span></code></pre></div></div>
<ol start="4">
<li>Check the logs of your signer node and make sure that it has successfully registered after restarting (the following log should be displayed: <code>STATE MACHINE: new cycle: Registered</code>).</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-the-mithril-relay-node">Set up the Mithril relay node<a href="#set-up-the-mithril-relay-node" class="hash-link" aria-label="Direct link to Set up the Mithril relay node" title="Direct link to Set up the Mithril relay node">​</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><ul>
<li>
<p>For <strong>production</strong> deployment, the setup of the <strong>Mithril relay</strong> is performed on the <strong>Cardano relay</strong> machine</p>
</li>
<li>
<p>For <strong>naive</strong> deployment, this step is not necessary.</p>
</li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-squid-from-source">Building Squid from source<a href="#building-squid-from-source" class="hash-link" aria-label="Direct link to Building Squid from source" title="Direct link to Building Squid from source">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><ul>
<li>
<p>If you have already installed <code>Squid</code> via <code>apt</code> package manager, we recommend that you delete it before manually building it from source by running the following commands:</p>
<ul>
<li><code>sudo systemctl stop squid</code></li>
<li><code>sudo apt remove squid</code></li>
<li><code>sudo apt autoremove</code>.</li>
</ul>
</li>
<li>
<p>The FAQ for compiling <code>Squid</code> is available <a href="https://wiki.squid-cache.org/SquidFaq/CompilingSquid" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p>You will need a C++ compiler that can be installed with the <code>sudo apt install build-essential</code> command.</p>
</li>
</ul></div></div>
<p>On the <a href="https://www.squid-cache.org/Versions/" target="_blank" rel="noopener noreferrer">Squid page listing released versions</a>, identify the latest stable released version (currently <code>6.12</code>) and download it:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://www.squid-cache.org/Versions/v6/squid-6.12.tar.gz</span><br></span></code></pre></div></div>
<p>Uncompress the downloaded archive and change the directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> xzf squid-6.12.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> squid-6.12</span><br></span></code></pre></div></div>
<p>Then, configure the compilation:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./configure </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--prefix</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/opt/squid </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--localstatedir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/opt/squid/var </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--libexecdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/opt/squid/lib/squid </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--datadir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/opt/squid/share/squid </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--sysconfdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/etc/squid </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --with-default-user</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">squid </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --with-logdir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/opt/squid/var/log/squid </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --with-pidfile</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/opt/squid/var/run/squid.pid</span><br></span></code></pre></div></div>
<p>Compile the sources:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><br></span></code></pre></div></div>
<p>And install <code>squid</code> binary:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre></div></div>
<p>Optionally, verify that the version is correct:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/squid/sbin/squid </span><span class="token parameter variable" style="color:#36acaa">-v</span><br></span></code></pre></div></div>
<p>You should see a result like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Squid Cache: Version </span><span class="token number" style="color:#36acaa">6.12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Service Name: squid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">configure options:  </span><span class="token string" style="color:#e3116c">&#x27;--prefix=/opt/squid&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;--localstatedir=/opt/squid/var&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;--libexecdir=/opt/squid/lib/squid&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;--datadir=/opt/squid/share/squid&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;--sysconfdir=/etc/squid&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;--with-default-user=squid&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;--with-logdir=/opt/squid/var/log/squid&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;--with-pidfile=/opt/squid/var/run/squid.pid&#x27;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-squid-proxy">Configuring the Squid proxy<a href="#configuring-the-squid-proxy" class="hash-link" aria-label="Direct link to Configuring the Squid proxy" title="Direct link to Configuring the Squid proxy">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The <strong>Mithril relay</strong> node serves as a forward proxy, relaying traffic between the <strong>Mithril signer</strong> and the <strong>Mithril aggregator</strong>. When appropriately configured, it facilitates the security of the <strong>block-producing</strong> node. You can use <code>squid</code> to operate this forward proxy, and this section presents a recommended configuration.</p></div></div>
<p>Make a copy of the original configuration:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> /etc/squid/squid.conf /etc/squid/squid.conf.bak</span><br></span></code></pre></div></div>
<p>Prepare the forward proxy configuration file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /etc/squid/squid.conf &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Listening port (port 3132 is recommended)</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">http_port **YOUR_RELAY_LISTENING_PORT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># ACL for internal IP of your block producer node</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">acl block_producer_internal_ip src **YOUR_BLOCK_PRODUCER_INTERNAL_IP**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># ACL for aggregator endpoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">acl aggregator_domain dstdomain .mithril.network</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># ACL for SSL port only</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">acl SSL_port port 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Allowed traffic</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">http_access allow block_producer_internal_ip aggregator_domain SSL_port</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Do not disclose block producer internal IP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">forwarded_for delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Turn off via header</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">via off</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Deny request for original source of a request</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">follow_x_forwarded_for deny all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Anonymize request headers</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Authorization allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Proxy-Authorization allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Cache-Control allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Content-Length allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Content-Type allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Date allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Host allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access If-Modified-Since allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Pragma allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Accept allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Accept-Charset allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Accept-Encoding allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Accept-Language allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Connection allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access All deny all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Disable cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">cache deny all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Deny everything else</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">http_access deny all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>release-preprod</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /etc/squid/squid.conf &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Listening port (port 3132 is recommended)</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">http_port 3132</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># ACL for internal IP of your block producer node</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">acl block_producer_internal_ip src 192.168.1.75</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># ACL for aggregator endpoint</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">acl aggregator_domain dstdomain .mithril.network</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># ACL for SSL port only</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">acl SSL_port port 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Allowed traffic</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">http_access allow block_producer_internal_ip aggregator_domain SSL_port</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Do not disclose block producer internal IP</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">forwarded_for delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Turn off via header</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">via off</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Deny request for original source of a request</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">follow_x_forwarded_for deny all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Anonymize request headers</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Authorization allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Proxy-Authorization allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Cache-Control allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Content-Length allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Content-Type allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Date allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Host allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access If-Modified-Since allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Pragma allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Accept allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Accept-Charset allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Accept-Encoding allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Accept-Language allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access Connection allow all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">request_header_access All deny all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Disable cache</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">cache deny all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Deny everything else</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">http_access deny all</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>In case you are using the same Cardano relay for multiple Cardano block producers, you will need to add a new line per block producer to authorize its internal IP:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ACL for internal IP of your block producer node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">acl block_producer_internal_ip src **YOUR_BLOCK_PRODUCER_INTERNAL_IP_1**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">acl block_producer_internal_ip src **YOUR_BLOCK_PRODUCER_INTERNAL_IP_2**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">acl block_producer_internal_ip src **YOUR_BLOCK_PRODUCER_INTERNAL_IP_3**</span><br></span></code></pre></div></div></div></div>
<p>With this configuration, the proxy will:</p>
<ul>
<li>accept incoming traffic originating from the internal IP of the block-producing machine</li>
<li>accept incoming traffic directed to the listening port of the proxy</li>
<li>accept incoming HTTPS traffic proxied to <code>mithril.network</code> domain hosts</li>
<li>anonymize the traffic completely and avoid disclosing any information about the block-producing machine</li>
<li>deny all other traffic.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-service-1">Installing the service<a href="#installing-the-service-1" class="hash-link" aria-label="Direct link to Installing the service" title="Direct link to Installing the service">​</a></h3>
<p>Create (or re-use) an unprivileged system user on the machine:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> adduser </span><span class="token parameter variable" style="color:#36acaa">--system</span><span class="token plain"> --no-create-home </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> squid</span><br></span></code></pre></div></div>
<p>Change ownership of <code>/opt/squid/var</code> directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> squid </span><span class="token parameter variable" style="color:#36acaa">-R</span><span class="token plain"> /opt/squid/var/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chgrp</span><span class="token plain"> squid </span><span class="token parameter variable" style="color:#36acaa">-R</span><span class="token plain"> /opt/squid/var/</span><br></span></code></pre></div></div>
<p>Create a <code>/etc/systemd/system/squid.service</code> description file for the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /etc/systemd/system/squid.service &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Description=Squid service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">StartLimitIntervalSec=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RestartSec=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">User=squid</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Group=squid</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ExecStart=/opt/squid/sbin/squid -f /etc/squid/squid.conf -d5</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">PIDFile=/opt/squid/var/run/squid.pid</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">WantedBy=multi-user.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<p>Reload the service configuration (optional):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span></code></pre></div></div>
<p>Then, start the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start squid</span><br></span></code></pre></div></div>
<p>Register the service to start on boot:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> squid</span><br></span></code></pre></div></div>
<p>Monitor the status of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status squid</span><br></span></code></pre></div></div>
<p>Finally, monitor the logs of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /var/log/syslog </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> squid</span><br></span></code></pre></div></div>
<p>And monitor squid access logs:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /opt/squid/var/log/squid/access.log</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If your <strong>Squid service</strong> does not start properly and you have the error message <code>FATAL: /dev/null (13) Permission denied</code> in the logs of the service, it means that some permissions need to be fixed following the creation of the new <code>squid</code> user by running the following commands:</p><ul>
<li><code>sudo chmod 666 /dev/null</code></li>
<li><code>sudo systemctl restart squid</code></li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="firewall-configuration">Firewall configuration<a href="#firewall-configuration" class="hash-link" aria-label="Direct link to Firewall configuration" title="Direct link to Firewall configuration">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>We assume that the <strong>Cardano relay</strong> machine is protected by a firewall. Therefore, it is necessary to allow the proxied traffic originating from the <strong>Cardano block producer</strong> through this firewall.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="about-the-cardano-relay-machine">About the Cardano relay machine<a href="#about-the-cardano-relay-machine" class="hash-link" aria-label="Direct link to About the Cardano relay machine" title="Direct link to About the Cardano relay machine">​</a></h4>
<p>You need to allow incoming traffic on the listening port of the <strong>Mithril relay</strong> on the <strong>Cardano relay</strong> machine, originating from the <strong>Cardano block producer</strong> machine.</p>
<p>Assuming you are using <a href="https://en.wikipedia.org/wiki/Uncomplicated_Firewall" target="_blank" rel="noopener noreferrer"><code>Uncomplicated Firewall</code></a> (<code>0.36+</code>), the command to open that traffic is:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> ufw allow from **YOUR_BLOCK_PRODUCER_INTERNAL_IP** to any port **YOUR_RELAY_LISTENING_PORT** proto tcp</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>release-preprod</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> ufw allow from </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.1.75 to any port </span><span class="token number" style="color:#36acaa">3132</span><span class="token plain"> proto tcp</span><br></span></code></pre></div></div></div></div>
<p>Assuming you are using <a href="https://en.wikipedia.org/wiki/Iptables" target="_blank" rel="noopener noreferrer"><code>Iptables</code></a> (<code>1.8.7+</code>), the command to open that traffic is:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:#36acaa">-A</span><span class="token plain"> INPUT </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> **YOUR_BLOCK_PRODUCER_INTERNAL_IP** </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> tcp </span><span class="token parameter variable" style="color:#36acaa">--dport</span><span class="token plain"> **YOUR_RELAY_LISTENING_PORT** </span><span class="token parameter variable" style="color:#36acaa">-j</span><span class="token plain"> ACCEPT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:#36acaa">-L</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> netfilter-persistent save</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>release-preprod</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:#36acaa">-A</span><span class="token plain"> INPUT </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.1.75 </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> tcp </span><span class="token parameter variable" style="color:#36acaa">--dport</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3132</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-j</span><span class="token plain"> ACCEPT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:#36acaa">-L</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> netfilter-persistent save</span><br></span></code></pre></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="verify-the-mithril-signer-deployment">Verify the Mithril signer deployment<a href="#verify-the-mithril-signer-deployment" class="hash-link" aria-label="Direct link to Verify the Mithril signer deployment" title="Direct link to Verify the Mithril signer deployment">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>There is a delay of <code>2</code> epochs between the signer node&#x27;s registration and its ability to generate individual signatures. This delay is further explained in the <a href="https://mithril.network/doc/mithril/mithril-protocol/certificates" target="_blank" rel="noopener noreferrer">Mithril certificate chain in depth</a> documentation.</p><p>Once this delay has passed, you should be able to observe your <code>PoolId</code> listed in some of the certificates accessible on the <a href="https://mithril.network/explorer" target="_blank" rel="noopener noreferrer"><code>Mithril Explorer</code></a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verify-your-signer-is-registered">Verify your signer is registered<a href="#verify-your-signer-is-registered" class="hash-link" aria-label="Direct link to Verify your signer is registered" title="Direct link to Verify your signer is registered">​</a></h3>
<p>After installing the Mithril signer, you can verify that your node is registered.</p>
<p>First, download the script into the desired directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://mithril.network/doc/scripts/verify_signer_registration.sh</span><br></span></code></pre></div></div>
<p>Make the script executable:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x verify_signer_registration.sh</span><br></span></code></pre></div></div>
<p>Finally, execute the script:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">PARTY_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">**YOUR_PARTY_ID** </span><span class="token assign-left variable" style="color:#36acaa">AGGREGATOR_ENDPOINT</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">**YOUR_AGGREGATOR_ENDPOINT** ./verify_signer_registration.sh</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">PARTY_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pool1hp72sauk0g0yqm4dzllz0pz6j93gewhllkzphn4hykkfmne43y </span><span class="token assign-left variable" style="color:#36acaa">AGGREGATOR_ENDPOINT</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://aggregator.release-preprod.api.mithril.network/aggregator ./verify_signer_registration.sh</span><br></span></code></pre></div></div></div></div>
<p>If your signer is registered, you should see this message:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> Congrats, your signer </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> is registered</span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre></div></div>
<p>Otherwise, you should see this error message:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> Oops, your signer </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> is not registered. Party ID not found among the signers registered at epoch </span><span class="token number" style="color:#36acaa">430</span><span class="token plain">.</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verify-your-signer-contributes-with-individual-signatures">Verify your signer contributes with individual signatures<a href="#verify-your-signer-contributes-with-individual-signatures" class="hash-link" aria-label="Direct link to Verify your signer contributes with individual signatures" title="Direct link to Verify your signer contributes with individual signatures">​</a></h3>
<p>After waiting for two epochs, you will be able to verify that your signer is contributing with individual signatures.</p>
<p>First, download the script into the desired directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://mithril.network/doc/scripts/verify_signer_signature.sh</span><br></span></code></pre></div></div>
<p>Make the script executable:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x verify_signer_signature.sh</span><br></span></code></pre></div></div>
<p>Finally, execute the script:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">PARTY_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">**YOUR_PARTY_ID** </span><span class="token assign-left variable" style="color:#36acaa">AGGREGATOR_ENDPOINT</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">**YOUR_AGGREGATOR_ENDPOINT** ./verify_signer_signature.sh</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>release-preprod</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">PARTY_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pool1hp72sauk0g0yqm4dzllz0pz6j93gewhllkzphn4hykkfmne43y </span><span class="token assign-left variable" style="color:#36acaa">AGGREGATOR_ENDPOINT</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://aggregator.release-preprod.api.mithril.network/aggregator ./verify_signer_signature.sh</span><br></span></code></pre></div></div></div></div>
<p>If your signer is contributing, you should see this message:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> Congrats, you have signed this certificate: https://aggregator.release-preprod.api.mithril.network/aggregator/certificate/el3p289b03a223244285b2ls10839846ae7a69f1e8362824a383f376f93f723f </span><span class="token operator" style="color:#393A34">!</span><br></span></code></pre></div></div>
<p>Otherwise, you should see this error message:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> Oops, your party </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> was not found </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the last </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"> certificates. Please try again later.</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/input-output-hk/mithril/edit/main/docs/website/root/manual/operate/run-signer-node.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doc/manual/operate/become-mithril-spo"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Become a Mithril SPO</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doc/manual/develop/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Develop</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mithril-signer-deployment-model" class="table-of-contents__link toc-highlight">Mithril signer deployment model</a></li><li><a href="#mithril-keys-certification" class="table-of-contents__link toc-highlight">Mithril keys certification</a></li><li><a href="#mithril-signer-footprint" class="table-of-contents__link toc-highlight">Mithril signer footprint</a><ul><li><a href="#cardano-transactions-certification-footprint" class="table-of-contents__link toc-highlight">Cardano transactions certification footprint</a></li></ul></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#set-up-the-mithril-signer-node" class="table-of-contents__link toc-highlight">Set up the Mithril signer node</a><ul><li><a href="#building-your-own-executable" class="table-of-contents__link toc-highlight">Building your own executable</a></li><li><a href="#download-the-pre-built-binary" class="table-of-contents__link toc-highlight">Download the pre-built binary</a></li><li><a href="#verifying-the-binary" class="table-of-contents__link toc-highlight">Verifying the binary</a></li><li><a href="#installing-the-service" class="table-of-contents__link toc-highlight">Installing the service</a></li><li><a href="#activate-prometheus-endpoint" class="table-of-contents__link toc-highlight">Activate Prometheus endpoint</a></li><li><a href="#rotating-the-kes-keys" class="table-of-contents__link toc-highlight">Rotating the KES keys</a></li></ul></li><li><a href="#set-up-the-mithril-relay-node" class="table-of-contents__link toc-highlight">Set up the Mithril relay node</a><ul><li><a href="#building-squid-from-source" class="table-of-contents__link toc-highlight">Building Squid from source</a></li><li><a href="#configuring-the-squid-proxy" class="table-of-contents__link toc-highlight">Configuring the Squid proxy</a></li><li><a href="#installing-the-service-1" class="table-of-contents__link toc-highlight">Installing the service</a></li><li><a href="#firewall-configuration" class="table-of-contents__link toc-highlight">Firewall configuration</a></li></ul></li><li><a href="#verify-the-mithril-signer-deployment" class="table-of-contents__link toc-highlight">Verify the Mithril signer deployment</a><ul><li><a href="#verify-your-signer-is-registered" class="table-of-contents__link toc-highlight">Verify your signer is registered</a></li><li><a href="#verify-your-signer-contributes-with-individual-signatures" class="table-of-contents__link toc-highlight">Verify your signer contributes with individual signatures</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="bg-blue"><div class="pageContainer py-14 text-gray-extra-light"><div class="laptop:flex laptop:flex-row tablet:grid tablet:grid-cols-2 laptop:gap-[6.25rem] gap-y-7 flex flex-col text-sm pb-12 tablet:pb-[3.625rem]"><div class="flex flex-col gap-6"><div class="font-bold min-h-5">Contributing</div><ul class="flex flex-col gap-6"><li class="footer__item"><a href="https://github.com/input-output-hk/mithril/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="">Contributing guidelines</a></li><li class="footer__item"><a class="" href="/doc/adr">Architectural Decision Records</a></li></ul></div><div class="flex flex-col gap-6"><div class="font-bold min-h-5">Community</div><ul class="flex flex-col gap-6"><li class="footer__item"><a href="https://discord.gg/5kaErDKDRq" target="_blank" rel="noopener noreferrer" class="">Discord (#ask-mithril)</a></li><li class="footer__item"><a href="https://github.com/input-output-hk/mithril/discussions" target="_blank" rel="noopener noreferrer" class="">GitHub discussions</a></li><li class="footer__item"><a href="https://cardano.stackexchange.com/search?q=mithril" target="_blank" rel="noopener noreferrer" class="">Stack Exchange</a></li></ul></div><div class="flex flex-col gap-6"><div class="font-bold min-h-5">More</div><ul class="flex flex-col gap-6"><li class="footer__item"><a href="https://mithril.cronitorstatus.com/" target="_blank" rel="noopener noreferrer" class="">Mithril networks status</a></li><li class="footer__item"><a href="https://lookerstudio.google.com/s/mbL23-8gibI" target="_blank" rel="noopener noreferrer" class="">Mithril protocol insights</a></li><li class="footer__item"><a href="https://github.com/input-output-hk/mithril/wiki/Logbook" target="_blank" rel="noopener noreferrer" class="">Logbook</a></li><li class="footer__item"><a href="https://iohk.io/en/blog" target="_blank" rel="noopener noreferrer" class="">Input Output (Blog)</a></li></ul></div><div class="flex flex-col gap-6"><div class="font-bold min-h-5">Legal</div><ul class="flex flex-col gap-6"><li class="footer__item"><a href="https://static.iohk.io/terms/iog-privacy-policy.pdf" target="_blank" rel="noopener noreferrer" class="">Privacy policy</a></li><li class="footer__item"><a href="https://static.iohk.io/terms/iog-terms-and-conditions.pdf" target="_blank" rel="noopener noreferrer" class="">Terms and conditions</a></li></ul></div></div><div class="flex tablet:items-center gap-2 tablet:flex-row flex-col text-gray-dark tablet:justify-between tablet:pt-4 tablet:border-t border-t-gray-dark"><div class="margin-bottom--sm"><div class="flex items-center text-2xl tracking-[-0.01125rem] gap-1"><img src="/doc/img/mithril-logo-dark.svg" alt="Mithril. A complete guide." class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doc/img/mithril-logo-dark.svg" alt="Mithril. A complete guide." class="themedComponent_mlkZ themedComponent--dark_xIcU"><h4>Mithril</h4></div></div><div class="footer__copyright">Copyright © 2025 IOG, Inc.</div></div></div></footer></div>
</body>
</html>