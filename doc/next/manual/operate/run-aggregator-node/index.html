<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-manual/operate/run-aggregator-node" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Run a Mithril aggregator node | Mithril. A complete guide.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mithril.network/doc/next/manual/operate/run-aggregator-node"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:image" content="https://mithril.network/doc/img/logo.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Run a Mithril aggregator node | Mithril. A complete guide."><meta data-rh="true" name="description" content="Running multiple Mithril aggregators on a Mithril network is enabled by the DMQ protocol, which is currently unstable and not suitable for production use."><meta data-rh="true" property="og:description" content="Running multiple Mithril aggregators on a Mithril network is enabled by the DMQ protocol, which is currently unstable and not suitable for production use."><link data-rh="true" rel="icon" href="/doc/img/mithril-logo.svg"><link data-rh="true" rel="canonical" href="https://mithril.network/doc/next/manual/operate/run-aggregator-node"><link data-rh="true" rel="alternate" href="https://mithril.network/doc/next/manual/operate/run-aggregator-node" hreflang="en"><link data-rh="true" rel="alternate" href="https://mithril.network/doc/next/manual/operate/run-aggregator-node" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Operate","item":"https://mithril.network/doc/next/manual/operate/"},{"@type":"ListItem","position":2,"name":"Run a Mithril aggregator node","item":"https://mithril.network/doc/next/manual/operate/run-aggregator-node"}]}</script><link rel="alternate" type="application/rss+xml" href="/doc/dev-blog/rss.xml" title="Mithril. A complete guide. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/dev-blog/atom.xml" title="Mithril. A complete guide. Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4MB41WL2Z2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4MB41WL2Z2",{anonymize_ip:!0})</script>






<link rel="alternate" type="application/rss+xml" href="/doc/adr/rss.xml" title="Mithril. A complete guide. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/adr/atom.xml" title="Mithril. A complete guide. Atom Feed">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="https://plausible.io/js/script.js" defer="defer" data-domain="mithril.network"></script><link rel="stylesheet" href="/doc/assets/css/styles.47431c2b.css">
<script src="/doc/assets/js/runtime~main.979f50c9.js" defer="defer"></script>
<script src="/doc/assets/js/main.ed5b94e4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#2A598E;color:#f1f1f1" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Participate in Mithril Protocol‚Äôs Mainnet Beta! Follow our SPO on-boarding guide  <a rel="noopener noreferrer" href="https://mithril.network/doc/manual/operate/become-mithril-spo">here</a>!</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><header aria-label="Main" class="flex navbar tablet:py-[30px] !px-0 shadow-none z-50 border-b border-[#EAEAEB] pt-3 pb-4 tablet:px-2 navbar--fixed-top"><div class="w-full px-6"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/doc/"><div class="navbar__logo"><img src="/doc/img/mithril-logo-text.svg" alt="Mithril. A complete guide." class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doc/img/mithril-logo-text.svg" alt="Mithril. A complete guide." class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/doc/next/manual/welcome">User manual</a><a class="navbar__item navbar__link" href="/doc/next/mithril/intro">About Mithril</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/doc/next/manual/operate/run-aggregator-node">Next üöß</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/doc/next/manual/operate/run-aggregator-node">Next üöß</a></li><li><a class="dropdown__link" href="/doc/manual/operate/run-aggregator-node">Current</a></li></ul></div><a href="https://mithril.network/explorer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Explorer</a><a class="navbar__item navbar__link" href="/doc/glossary">Glossary</a><a class="navbar__item navbar__link" href="/doc/dev-blog">Blog</a><a class="navbar__item navbar__link" href="/doc/adr">ADRs</a><div class="navbarSearchContainer_Bca1"></div><a href="https://github.com/input-output-hk/mithril/" target="_blank" rel="noopener noreferrer" class="hover:text-[var(--ifm-navbar-link-hover-color)] mx-3 py-1 laptop:flex hidden"><svg xmlns="http://www.w3.org/2000/svg" width="26" height="24" viewBox="0 0 26 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.241 0C6.45096 0 0.961914 5.49998 0.961914 12.3042C0.961914 17.7432 4.47894 22.3472 9.35798 23.9767C9.96799 24.0991 10.1914 23.7119 10.1914 23.3862C10.1914 23.1009 10.1713 22.1232 10.1713 21.1044C6.75559 21.8379 6.04429 19.6377 6.04429 19.6377C5.49536 18.2117 4.68202 17.8452 4.68202 17.8452C3.56405 17.0914 4.76346 17.0914 4.76346 17.0914C6.00358 17.1729 6.6543 18.3544 6.6543 18.3544C7.75191 20.2284 9.5206 19.6989 10.2321 19.3729C10.3337 18.5784 10.6592 18.0284 11.0048 17.7229C8.28048 17.4377 5.41418 16.3784 5.41418 11.6522C5.41418 10.3077 5.90178 9.20771 6.67441 8.35222C6.55251 8.04672 6.12548 6.78347 6.79656 5.09273C6.79656 5.09273 7.83334 4.76673 10.1711 6.35572C11.1719 6.08639 12.2041 5.94938 13.241 5.94823C14.2777 5.94823 15.3346 6.09097 16.3106 6.35572C18.6486 4.76673 19.6854 5.09273 19.6854 5.09273C20.3564 6.78347 19.9292 8.04672 19.8073 8.35222C20.6002 9.20771 21.0677 10.3077 21.0677 11.6522C21.0677 16.3784 18.2014 17.4172 15.4568 17.7229C15.9042 18.1099 16.2902 18.8432 16.2902 20.0044C16.2902 21.6544 16.2701 22.9787 16.2701 23.3859C16.2701 23.7119 16.4938 24.0991 17.1036 23.9769C21.9826 22.3469 25.4996 17.7432 25.4996 12.3042C25.5198 5.49998 20.0106 0 13.241 0Z" fill="currentColor"></path></svg></a><a href="https://discord.gg/5kaErDKDRq" target="_blank" rel="noopener noreferrer" class="hover:text-[var(--ifm-navbar-link-hover-color)] mx-3 py-1 laptop:flex hidden"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="18" viewBox="0 0 23 18"><path d="M19.4778 1.49632C18.0074 0.806713 16.4357 0.286253 14.7879 0C14.7626 0 14.7246 0 14.7119 0.0390345C14.5091 0.403356 14.2809 0.884782 14.1288 1.27513C12.3543 1.00189 10.6051 1.00189 8.8686 1.27513C8.71649 0.884782 8.47566 0.416368 8.27286 0.0390345C8.26019 0.0130115 8.22216 0 8.19681 0C6.54903 0.286253 4.9773 0.793701 3.51965 1.49632C3.50697 1.49632 3.4943 1.50933 3.4943 1.52234C0.50294 6.08938 -0.308275 10.5523 0.0973328 14.9632C0.0973328 14.9892 0.110008 15.0023 0.122683 15.0153C2.08734 16.4986 4.00131 17.3964 5.86457 17.9949C5.88992 17.9949 5.92794 17.9949 5.94062 17.9689C6.38425 17.3443 6.77718 16.6937 7.11941 16.0041C7.14476 15.9651 7.11941 15.9131 7.08139 15.9C6.4603 15.6528 5.86457 15.3536 5.2815 15.0283C5.2308 15.0023 5.2308 14.9372 5.2815 14.8982C5.40826 14.8071 5.52233 14.703 5.63641 14.6119C5.66176 14.5989 5.68711 14.5859 5.71246 14.6119C9.47701 16.3815 13.5584 16.3815 17.2723 14.6119C17.2976 14.6119 17.323 14.6119 17.3483 14.6119C17.4624 14.703 17.5892 14.8071 17.7032 14.8982C17.7413 14.9242 17.7413 15.0023 17.7032 15.0283C17.1328 15.3666 16.5371 15.6658 15.9034 15.9C15.8653 15.9131 15.84 15.9651 15.8653 16.0041C16.2076 16.6937 16.6005 17.3443 17.0441 17.9689C17.0568 17.9949 17.0948 18.0079 17.1202 17.9949C18.9961 17.3964 20.9101 16.4986 22.8747 15.0153C22.8874 15.0023 22.9001 14.9762 22.9001 14.9632C23.3817 9.86271 22.1015 5.4388 19.5031 1.52234C19.5031 1.50933 19.4904 1.49632 19.4778 1.49632ZM7.6898 12.2828C6.5617 12.2828 5.62374 11.2159 5.62374 9.90175C5.62374 8.58759 6.53635 7.52064 7.6898 7.52064C8.84325 7.52064 9.78121 8.6006 9.75586 9.90175C9.75586 11.2159 8.84325 12.2828 7.6898 12.2828ZM15.333 12.2828C14.2049 12.2828 13.2669 11.2159 13.2669 9.90175C13.2669 8.58759 14.1795 7.52064 15.333 7.52064C16.4864 7.52064 17.4244 8.6006 17.399 9.90175C17.399 11.2159 16.4864 12.2828 15.333 12.2828Z" fill="currentColor"></path></svg></a><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></header><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/next/manual/welcome"><span title="Welcome" class="linkLabel_WmDU">Welcome</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/doc/next/manual/getting-started/"><span title="Get started" class="categoryLinkLabel_W154">Get started</span></a><button aria-label="Collapse sidebar category &#x27;Get started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/getting-started/prerequisites"><span title="Prerequisites" class="linkLabel_WmDU">Prerequisites</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/getting-started/network-configurations"><span title="Network configurations" class="linkLabel_WmDU">Network configurations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/getting-started/bootstrap-cardano-node"><span title="Bootstrap a Cardano node" class="linkLabel_WmDU">Bootstrap a Cardano node</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/doc/next/manual/operate/"><span title="Operate" class="categoryLinkLabel_W154">Operate</span></a><button aria-label="Collapse sidebar category &#x27;Operate&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/operate/become-mithril-spo"><span title="Become a Mithril SPO" class="linkLabel_WmDU">Become a Mithril SPO</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/operate/run-signer-node"><span title="Run a Mithril signer node" class="linkLabel_WmDU">Run a Mithril signer node</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doc/next/manual/operate/run-aggregator-node"><span title="Run a Mithril aggregator node" class="linkLabel_WmDU">Run a Mithril aggregator node</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/doc/next/manual/develop/"><span title="Develop" class="categoryLinkLabel_W154">Develop</span></a><button aria-label="Collapse sidebar category &#x27;Develop&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/doc/next/category/mithril-network-nodes"><span title="Mithril network nodes" class="categoryLinkLabel_W154">Mithril network nodes</span></a><button aria-label="Collapse sidebar category &#x27;Mithril network nodes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/develop/nodes/mithril-aggregator"><span title="Mithril aggregator node" class="linkLabel_WmDU">Mithril aggregator node</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/develop/nodes/mithril-signer"><span title="Mithril signer node" class="linkLabel_WmDU">Mithril signer node</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/develop/nodes/mithril-client"><span title="Mithril client node" class="linkLabel_WmDU">Mithril client node</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/develop/nodes/mithril-client-library"><span title="Mithril client library" class="linkLabel_WmDU">Mithril client library</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/develop/nodes/mithril-client-library-wasm"><span title="Mithril client library WASM" class="linkLabel_WmDU">Mithril client library WASM</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/develop/run-mithril-devnet"><span title="Run a private network" class="linkLabel_WmDU">Run a private network</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/develop/protocol-simulation"><span title="Protocol simulation" class="linkLabel_WmDU">Protocol simulation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/next/manual/develop/references"><span title="API references" class="linkLabel_WmDU">API references</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/input-output-hk/mithril/releases" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Release notes" class="linkLabel_WmDU">Release notes</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://discord.gg/5kaErDKDRq" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Support" class="linkLabel_WmDU">Support</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Mithril. A complete guide.<!-- --> <b>Next üöß</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/doc/manual/operate/run-aggregator-node">latest version</a></b> (<!-- -->Current<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/doc/next/manual/operate/"><span>Operate</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Run a Mithril aggregator node</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next üöß</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Run a Mithril aggregator node</h1></header>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Running multiple Mithril aggregators on a Mithril network is enabled by the DMQ protocol, which is currently <strong>unstable</strong> and not suitable for production use.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>You don&#x27;t need to be a Cardano SPO to run a Mithril aggregator node.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>For more information about the <strong>Mithril protocol</strong>, see the <a class="" href="/doc/next/mithril/intro">About Mithril</a> section.</p></div></div>
<p>On a Mithril network, there exist two types of aggregator nodes:</p>
<ul>
<li class=""><strong>Leader aggregator node</strong>: this node is managed by the entity that generates genesis certificates of the Mithril network (Input Output for all networks specified in the <a class="" href="/doc/next/manual/getting-started/network-configurations">Network configurations</a>. It is responsible for collecting signer registrations (which is still a centralized process) and broadcasting them to other nodes of the network. It provides also a bootstrap point for other aggregator nodes to synchronize the certificate chain.</li>
<li class=""><strong>Follower aggregator node</strong>: this node is managed by any entity willing to contribute to the Mithril network reliability or to provide additional availability guarantees to an infrastructure (eg, for a bridge powered by Mithril). This document explains how to set up and run such a follower Mithril aggregator node.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The follower aggregator listens to signatures diffused by the SPOs&#x27; Mithril signer nodes and produces Mithril certificates accordingly. Until the DMQ protocol is stabilized and widely deployed (at least <strong>60%</strong> of stake registered in the Mithril protocol operating it), the follower aggregator will not be able to produce certificates.</p></div></div>
<p>Every follower aggregator node is free to select the types of data it wants to support certification for:</p>
<ul>
<li class=""><strong>Cardano database v2</strong><sup>(*)</sup></li>
<li class=""><strong>Cardano transactions</strong></li>
<li class=""><strong>Cardano stake distribution</strong>.</li>
</ul>
<p><em><sup>(*)</sup>: requires access to GCP to store Cardano database and may incur costs.</em></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>For more information about the <strong>supported data</strong>, see the <a class="" href="/doc/next/mithril/advanced/mithril-certification/">Mithril certification</a> section.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">‚Äã</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Note that this guide works only on a Linux machine.</p></div></div>
<ul>
<li class="">
<p>Operate a <strong>Cardano full node</strong></p>
</li>
<li class="">
<p>To access the file system of the <strong>Cardano full node</strong>, you will need the following permissions:</p>
<ul>
<li class="">Read rights on the <code>Database</code> folder (specified by the <code>--database-path</code> setting of the <strong>Cardano node</strong>)</li>
<li class="">Read and write rights on the <code>Inter Process Communication</code> file (typically defined by the <code>CARDANO_NODE_SOCKET_PATH</code> environment variable used to launch the <strong>Cardano node</strong>)</li>
</ul>
</li>
<li class="">
<p>Install a correctly configured Rust toolchain (latest stable version); you can follow the instructions provided <a href="https://www.rust-lang.org/learn/get-started" target="_blank" rel="noopener noreferrer" class="">here</a></p>
</li>
<li class="">
<p>Install build tools <code>build-essential</code> and <code>m4</code>; for example, on Ubuntu/Debian/Mint, run <code>sudo apt install build-essential m4</code></p>
</li>
<li class="">
<p>Install OpenSSL development libraries; for example, on Ubuntu/Debian/Mint, run <code>apt install libssl-dev</code></p>
</li>
<li class="">
<p>Install a recent version of <code>jq</code> (version 1.6+) by running <code>apt install jq</code>.</p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="hardware">Hardware<a href="#hardware" class="hash-link" aria-label="Direct link to Hardware" title="Direct link to Hardware" translate="no">‚Äã</a></h2>
<p>Running a Mithril aggregator node requires sufficient hardware resources. We recommend using a virtual machine or dedicated server with the following specifications:</p>
<ul>
<li class=""><strong>CPU</strong>:<!-- -->
<ul>
<li class="">For test networks (<code>preprod</code>, <code>preview</code>): At least 4 vCPUs</li>
<li class="">For <code>mainnet</code>: At least 8 vCPUs</li>
</ul>
</li>
<li class=""><strong>RAM</strong>:<!-- -->
<ul>
<li class="">For test networks (<code>preprod</code>, <code>preview</code>): 16 GB minimum, 32 GB recommended</li>
<li class="">For <code>mainnet</code>: 32 GB minimum, 64 GB recommended</li>
</ul>
</li>
<li class=""><strong>Storage</strong>: At least 500 GB of disk space.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The actual resource requirements may vary depending on the signed entity types you choose to support. Supporting Cardano database snapshots and transaction certification will require more storage and processing power than supporting only stake distributions.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="set-up-the-mithril-aggregator-node">Set up the Mithril aggregator node<a href="#set-up-the-mithril-aggregator-node" class="hash-link" aria-label="Direct link to Set up the Mithril aggregator node" title="Direct link to Set up the Mithril aggregator node" translate="no">‚Äã</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Compare the version of your Cardano node with the minimum supported versions listed in the <a href="https://github.com/input-output-hk/mithril/blob/main/networks.json" target="_blank" rel="noopener noreferrer" class=""><code>networks.json</code></a> file to verify its compatibility with the Mithril aggregator.</p><p>First, check the version of your Cardano node by running the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cardano-node </span><span class="token parameter variable" style="color:#36acaa">--version</span><br></span></code></pre></div></div><p>Then, refer to the minimum supported versions listed in the <a href="https://github.com/input-output-hk/mithril/blob/main/networks.json" target="_blank" rel="noopener noreferrer" class=""><code>networks.json</code></a> file.</p><p>You can also fetch the minimum supported version for your network using the command below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-O</span><span class="token plain"> - https://raw.githubusercontent.com/input-output-hk/mithril/main/networks.json </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> jq </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;.&quot;**YOUR_CARDANO_NETWORK**&quot;.&quot;cardano-minimum-version&quot;.&quot;mithril-aggregator&quot;&#x27;</span><br></span></code></pre></div></div><p>Here is an example for <code>preprod</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-O</span><span class="token plain"> - https://raw.githubusercontent.com/input-output-hk/mithril/main/networks.json </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> jq </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;.&quot;preprod&quot;.&quot;cardano-minimum-version&quot;.&quot;mithril-aggregator&quot;&#x27;</span><br></span></code></pre></div></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="building-your-own-mithril-aggregator-executable">Building your own Mithril aggregator executable<a href="#building-your-own-mithril-aggregator-executable" class="hash-link" aria-label="Direct link to Building your own Mithril aggregator executable" title="Direct link to Building your own Mithril aggregator executable" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="download-the-source-file">Download the source file<a href="#download-the-source-file" class="hash-link" aria-label="Direct link to Download the source file" title="Direct link to Download the source file" translate="no">‚Äã</a></h4>
<p>To download the source from GitHub (HTTPS), run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/input-output-hk/mithril.git</span><br></span></code></pre></div></div>
<p>Or (SSH):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone git@github.com:input-output-hk/mithril.git</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="build-the-mithril-aggregator-binary">Build the Mithril aggregator binary<a href="#build-the-mithril-aggregator-binary" class="hash-link" aria-label="Direct link to Build the Mithril aggregator binary" title="Direct link to Build the Mithril aggregator binary" translate="no">‚Äã</a></h4>
<p>First, switch to build a branch/tag:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># **YOUR_BUILD_BRANCH_OR_TAG** depends on the Mithril network you target,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># please refer to the **Build from** column of the **Mithril networks** section</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout **YOUR_BUILD_BRANCH_OR_TAG**</span><br></span></code></pre></div></div>
<p>Then, change the directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> mithril/mithril-aggregator</span><br></span></code></pre></div></div>
<p>Run tests (optional):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token builtin class-name">test</span><br></span></code></pre></div></div>
<p>Finally, build the executable:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> build</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="download-the-pre-built-binary">Download the pre-built binary<a href="#download-the-pre-built-binary" class="hash-link" aria-label="Direct link to Download the pre-built binary" title="Direct link to Download the pre-built binary" translate="no">‚Äã</a></h3>
<p>You can install a the <strong>latest</strong> released binary of the <strong>mithril-aggregator</strong> by running this one line command (<em>replace <strong>YOUR_PATH</strong> with your installation path</em>):</p>
<pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><p>curl --proto &#x27;=https&#x27; --tlsv1.2 -sSf
<a href="https://raw.githubusercontent.com/input-output-hk/mithril/refs/heads/main/mithril-install.sh" target="_blank" rel="noopener noreferrer" class="">https://raw.githubusercontent.com/input-output-hk/mithril/refs/heads/main/mithril-install.sh</a>
| sh -s -- -c <!-- -->mithril-aggregator<!-- --> -d latest -p <strong>YOUR_PATH</strong></p></code></pre>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can also install the <strong>mithril-aggregator</strong> binary for other distributions:</p><ul>
<li class="">use <code>-d unstable</code> for the <strong>unstable</strong> version</li>
<li class="">use <code>-d **DISTRIBUTION_VERSION**</code> for a specific distribution (e.g. <code>-d 2445.0</code>)</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The Linux binaries target <code>glibc</code>, and have a minimum requirement of <code>glibc 2.35</code> (compatible with <code>Ubuntu 22.04</code>
or <code>Debian 12 - Bookworm</code>).</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="verifying-the-binary">Verifying the binary<a href="#verifying-the-binary" class="hash-link" aria-label="Direct link to Verifying the binary" title="Direct link to Verifying the binary" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="verify-the-version-of-the-binary">Verify the version of the binary<a href="#verify-the-version-of-the-binary" class="hash-link" aria-label="Direct link to Verify the version of the binary" title="Direct link to Verify the version of the binary" translate="no">‚Äã</a></h4>
<p>You can check if the Mithril aggregator binary is running the correct version by running:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./mithril-aggregator </span><span class="token parameter variable" style="color:#36acaa">-V</span><br></span></code></pre></div></div>
<p>You should see something like:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mithril-aggregator </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">.0</span><br></span></code></pre></div></div>
<p>‚ö†Ô∏è<!-- --> Please verify that the displayed version matches the version described in the release/pre-release notes (refer to the <strong>Build from</strong> column in the <strong>Mithril networks</strong> section).</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="verify-the-build">Verify the build<a href="#verify-the-build" class="hash-link" aria-label="Direct link to Verify the build" title="Direct link to Verify the build" translate="no">‚Äã</a></h4>
<p>Check if the Mithril aggregator binary is working correctly by running the help function:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./mithril-aggregator </span><span class="token parameter variable" style="color:#36acaa">-h</span><br></span></code></pre></div></div>
<p>You should see:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Mithril aggregator </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: mithril-aggregator </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OPTIONS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">COMMAND</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  genesis   Genesis tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  era       Era tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  serve     Server runtime mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tools     List of tools to upkeep the aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  database  Database tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin class-name">help</span><span class="token plain">      Print this message or the </span><span class="token builtin class-name">help</span><span class="token plain"> of the given subcommand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -r, --run-mode </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">RUN_MODE</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Run mode </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">default: dev</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v, --verbose</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Verbosity level</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --db-directory </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">DB_DIRECTORY</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Directory of the Cardano </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --config-directory </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">CONFIG_DIRECTORY</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Directory where the configuration </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> is located </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">default: ./config</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h, </span><span class="token parameter variable" style="color:#36acaa">--help</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Print </span><span class="token builtin class-name">help</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -V, </span><span class="token parameter variable" style="color:#36acaa">--version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          Print version</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you wish to delve deeper, you can access logs at various levels from the Mithril aggregator:</p><ul>
<li class="">Add <code>-v</code> for some logs (WARN)</li>
<li class="">Add <code>-vv</code> for more logs (INFO)</li>
<li class="">Add <code>-vvv</code> for even more logs (DEBUG)</li>
<li class="">Add <code>-vvvv</code> for all logs (TRACE).</li>
</ul></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-the-service">Installing the service<a href="#installing-the-service" class="hash-link" aria-label="Direct link to Installing the service" title="Direct link to Installing the service" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="move-the-executable">Move the executable<a href="#move-the-executable" class="hash-link" aria-label="Direct link to Move the executable" title="Direct link to Move the executable" translate="no">‚Äã</a></h4>
<p>To move the executable to /opt/mithril, run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /opt/mithril</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> mithril-aggregator /opt/mithril</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="set-up-the-service">Set up the service<a href="#set-up-the-service" class="hash-link" aria-label="Direct link to Set up the service" title="Direct link to Set up the service" translate="no">‚Äã</a></h4>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><ul>
<li class=""><code>User=cardano</code>:
Replace this value with the correct user. We assume that the user running the <strong>Cardano node</strong> is <code>cardano</code>. The <strong>Mithril aggregator</strong> must run with the same user as the <strong>Cardano node</strong> to access the database and socket files.</li>
</ul><p>The configuration values for the <code>/opt/mithril/mithril-aggregator.env</code> file are described below:</p><p><strong>Base configuration</strong> values are:</p><ul>
<li class="">
<p><code>SIGNED_ENTITY_TYPES</code>: Comma-separated list of signed entity types to certify (eg, <code>MithrilStakeDistribution,CardanoImmutableFilesFull,CardanoStakeDistribution,CardanoDatabase,CardanoTransactions</code>)</p>
</li>
<li class="">
<p><code>SERVER_PORT</code>: Listening server port (default: <code>8080</code>)</p>
</li>
<li class="">
<p><code>PUBLIC_SERVER_URL</code>: Public URL of your aggregator (eg, <code>https://aggregator.example.com/aggregator</code>)</p>
</li>
<li class="">
<p><code>LEADER_AGGREGATOR_ENDPOINT</code>: Endpoint of the leader aggregator to synchronize with (required for follower aggregators, can be found in the <a class="" href="/doc/next/manual/getting-started/network-configurations">Network configurations</a>)</p>
</li>
<li class="">
<p><code>RUN_INTERVAL</code>: Interval between two runtime cycles in milliseconds (eg, <code>60000</code> for 60 seconds)</p>
</li>
<li class="">
<p><code>AGGREGATE_SIGNATURE_TYPE</code>: Type of aggregate signature to use (default: <code>Concatenation</code>)</p>
</li>
<li class="">
<p><code>STORE_RETENTION_LIMIT</code>: Maximum number of records to keep in internal stores. If not set, no limit is applied. A value of <code>5</code> is recommended to limit disk usage</p>
</li>
<li class="">
<p><code>NETWORK</code>: Cardano network name (eg, <code>mainnet</code>, <code>preprod</code>, or <code>preview</code>)</p>
</li>
<li class="">
<p><code>NETWORK_MAGIC</code>: Cardano network magic number (required only if not using <code>mainnet</code>, <code>preprod</code> or <code>preview</code>)</p>
</li>
<li class="">
<p><code>CARDANO_NODE_SOCKET_PATH</code>: Path to the IPC file of the Cardano node</p>
</li>
<li class="">
<p><code>CARDANO_NODE_VERSION</code>: Version of the Cardano node running (eg, <code>10.5.0</code>)</p>
</li>
<li class="">
<p><code>CHAIN_OBSERVER_TYPE</code>: Type of chain observer (default: <code>pallas</code>)</p>
</li>
<li class="">
<p><code>ERA_READER_ADAPTER_TYPE</code>: Type of era reader adapter to use (default: <code>bootstrap</code>, use <code>cardano-chain</code> for production networks as specified in <a class="" href="/doc/next/manual/getting-started/network-configurations">Network configurations</a>)</p>
</li>
<li class="">
<p><code>ERA_READER_ADAPTER_PARAMS</code>: JSON encoded parameters for the era reader adapter. For <code>cardano-chain</code> type, compute using: <code>jq -nc --arg address $(wget -q -O - **YOUR_ERA_READER_ADDRESS**) --arg verification_key $(wget -q -O - **YOUR_ERA_READER_VERIFICATION_KEY**) &#x27;{&quot;address&quot;: $address, &quot;verification_key&quot;: $verification_key}&#x27;</code> (URLs can be found in the <a class="" href="/doc/next/manual/getting-started/network-configurations">Network configurations</a>)</p>
</li>
<li class="">
<p><code>GENESIS_VERIFICATION_KEY</code>: Genesis verification key for the Mithril network. Fetch using: <code>wget -q -O - **YOUR_GENESIS_VERIFICATION_KEY**</code> (URL can be found in the <a class="" href="/doc/next/manual/getting-started/network-configurations">Network configurations</a>)</p>
</li>
<li class="">
<p><code>DMQ_NODE_SOCKET_PATH</code>: Path to the IPC file of the DMQ node</p>
</li>
<li class="">
<p><code>CUSTOM_ORIGIN_TAG_WHITE_LIST</code>: Comma-separated list of custom origin tags to whitelist for client requests (default: <code>EXPLORER,BENCHMARK,CI,NA</code>).</p>
</li>
<li class="">
<p><strong>Base configuration</strong> <strong>optional</strong> values are:</p>
<ul>
<li class=""><code>BLOCKFROST_PARAMETERS</code>: Parameters to connect to the Blockfrost API. Used to fetch the ticker and name of the registered stake pools. Example: <code>{&quot;project_id&quot;:&quot;preprodWuV1ICdtOWfZYfdcxpZ0tsS1N9rVZomQ&quot;}</code></li>
<li class=""><code>SIGNER_IMPORTER_RUN_INTERVAL</code>: Time interval at which the pools names and ticker in blockfrost will be imported (in minutes, default: <code>720</code>).</li>
</ul>
</li>
<li class="">
<p>The <strong>Cardano database</strong> configuration values are (only needed if supporting Cardano database certification):</p>
<ul>
<li class=""><code>DB_DIRECTORY</code>: Directory of the Cardano node database stores (same as the <code>--database-path</code> setting of the Cardano node)</li>
<li class=""><code>DATA_STORES_DIRECTORY</code>: Directory where the aggregator will store its databases (eg, <code>/opt/mithril/stores</code>)</li>
<li class=""><code>GOOGLE_APPLICATION_CREDENTIALS_JSON</code>: JSON content of the GCP service account credentials (required if using GCP for snapshot storage)</li>
<li class=""><code>GOOGLE_APPLICATION_CREDENTIALS_GCP_KMS_JSON</code>: JSON content of the GCP KMS credentials for signing (optional, for using GCP KMS to sign ancillary files)</li>
<li class=""><code>SNAPSHOT_UPLOADER_TYPE</code>: Type of snapshot uploader (<code>gcp</code> for Google Cloud Storage or <code>local</code> for local storage)</li>
<li class=""><code>SNAPSHOT_BUCKET_NAME</code>: Name of the GCP bucket where snapshots are stored (required if <code>SNAPSHOT_UPLOADER_TYPE</code> is <code>gcp</code>)</li>
<li class=""><code>SNAPSHOT_USE_CDN_DOMAIN</code>: Set to <code>true</code> to use CDN domain for constructing snapshot URLs (default: <code>false</code>, only relevant for GCP)</li>
<li class=""><code>SNAPSHOT_COMPRESSION_ALGORITHM</code>: Compression algorithm for snapshot archives (default: <code>zstandard</code>, can also be <code>gzip</code>)</li>
<li class=""><code>ZSTANDARD_PARAMETERS__LEVEL</code>: Zstandard compression level (eg, <code>9</code> for maximum compression, range 1-22)</li>
<li class=""><code>ZSTANDARD_PARAMETERS__NUMBER_OF_WORKERS</code>: Number of worker threads for Zstandard compression (eg, <code>4</code>)</li>
<li class=""><code>ANCILLARY_FILES_SIGNER_CONFIG</code>: JSON configuration for signing ancillary files. Can be either a secret key or a GCP KMS key. Example with secret key: <code>{&quot;type&quot;: &quot;secret-key&quot;, &quot;secret_key&quot;: &quot;your_hex_encoded_secret_key&quot;}</code>.</li>
</ul>
</li>
<li class="">
<p>The <strong>Cardano transactions</strong> configuration values are (only needed if supporting Cardano transactions certification):</p>
<ul>
<li class=""><code>CARDANO_TRANSACTIONS_PROVER_CACHE_POOL_SIZE</code>: Size of the prover cache pool (default: <code>10</code>). This configuration can have a significant impact on the aggregator&#x27;s memory usage. In particular, on <code>mainnet</code>, we recommend avoiding values higher than <code>10</code>.</li>
<li class=""><code>CARDANO_TRANSACTIONS_DATABASE_CONNECTION_POOL_SIZE</code>: Size of the database connection pool (default: <code>10</code>).</li>
</ul>
</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an <strong>example</strong> set of values for <strong>release-preprod</strong> that will be used in this guide in the <strong>tip</strong> boxes to illustrate some commands:</p><ul>
<li class="">
<p><strong>Base configuration</strong>:</p>
<ul>
<li class=""><strong>SIGNED_ENTITY_TYPES</strong>: <code>MithrilStakeDistribution,CardanoStakeDistribution,CardanoTransactions</code> (only supporting stake distributions and transactions, excluding database snapshots)</li>
<li class=""><strong>SERVER_PORT</strong>: <code>8080</code></li>
<li class=""><strong>PUBLIC_SERVER_URL</strong>: <code>https://aggregator.example.com/aggregator</code></li>
<li class=""><strong>LEADER_AGGREGATOR_ENDPOINT</strong>: <code>https://aggregator.release-preprod.api.mithril.network/aggregator</code></li>
<li class=""><strong>RUN_INTERVAL</strong>: <code>60000</code></li>
<li class=""><strong>AGGREGATE_SIGNATURE_TYPE</strong>: <code>Concatenation</code></li>
<li class=""><strong>STORE_RETENTION_LIMIT</strong>: <code>5</code></li>
<li class=""><strong>NETWORK</strong>: <code>preprod</code></li>
<li class=""><strong>NETWORK_MAGIC</strong>: <code>1</code></li>
<li class=""><strong>CARDANO_NODE_SOCKET_PATH</strong>: <code>/cardano/ipc/node.socket</code></li>
<li class=""><strong>CARDANO_NODE_VERSION</strong>: <code>10.5.0</code></li>
<li class=""><strong>CHAIN_OBSERVER_TYPE</strong>: <code>pallas</code></li>
<li class=""><strong>ERA_READER_ADAPTER_TYPE</strong>: <code>cardano-chain</code></li>
<li class=""><strong>ERA_READER_ADAPTER_PARAMS</strong>: <code>$(jq -nc --arg address $(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-preprod/era.addr) --arg verification_key $(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-preprod/era.vkey) &#x27;{&quot;address&quot;: $address, &quot;verification_key&quot;: $verification_key}&#x27;)</code></li>
<li class=""><strong>GENESIS_VERIFICATION_KEY</strong>: <code>$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-preprod/genesis.vkey)</code></li>
<li class=""><strong>DMQ_NODE_SOCKET_PATH</strong>: <code>/dmq/ipc/node.socket</code></li>
<li class=""><strong>CUSTOM_ORIGIN_TAG_WHITE_LIST</strong>: <code>EXPLORER,BENCHMARK,CI,NA</code></li>
</ul>
</li>
<li class="">
<p><strong>Optional configuration</strong>:</p>
<ul>
<li class=""><strong>BLOCKFROST_PARAMETERS</strong>: <code>{&quot;project_id&quot;:&quot;preprodWuV1ICdtOWfZYfdcxpZ0tsS1N9rVZomQ&quot;}</code></li>
<li class=""><strong>SIGNER_IMPORTER_RUN_INTERVAL</strong>: 720</li>
</ul>
</li>
<li class="">
<p><strong>Cardano database configuration</strong>:</p>
<ul>
<li class=""><strong>DB_DIRECTORY</strong>: <code>/cardano/db</code></li>
<li class=""><strong>DATA_STORES_DIRECTORY</strong>: <code>/opt/mithril/stores</code></li>
<li class=""><strong>GOOGLE_APPLICATION_CREDENTIALS_JSON</strong>: <code>**YOUR_SECRET**</code></li>
<li class=""><strong>GOOGLE_APPLICATION_CREDENTIALS_GCP_KMS_JSON</strong>: <code>**YOUR_SECRET**</code></li>
<li class=""><strong>SNAPSHOT_UPLOADER_TYPE</strong>: <code>local</code></li>
<li class=""><strong>SNAPSHOT_BUCKET_NAME</strong>: <code>mithril-snapshots</code></li>
<li class=""><strong>SNAPSHOT_USE_CDN_DOMAIN</strong>: <code>false</code></li>
<li class=""><strong>SNAPSHOT_COMPRESSION_ALGORITHM</strong>: <code>zstandard</code></li>
<li class=""><strong>ZSTANDARD_PARAMETERS__LEVEL</strong>: <code>9</code></li>
<li class=""><strong>ZSTANDARD_PARAMETERS__NUMBER_OF_WORKERS</strong>: <code>4</code></li>
<li class=""><strong>ANCILLARY_FILES_SIGNER_CONFIG</strong>: <code>**YOUR_SECRET**</code></li>
</ul>
</li>
<li class="">
<p><strong>Cardano transaction configuration</strong>:</p>
<ul>
<li class=""><strong>CARDANO_TRANSACTIONS_PROVER_CACHE_POOL_SIZE</strong>: <code>10</code></li>
<li class=""><strong>CARDANO_TRANSACTIONS_DATABASE_CONNECTION_POOL_SIZE</strong>: <code>10</code></li>
</ul>
</li>
</ul></div></div>
<p>First, create an environment file that the service will use:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/mithril/mithril-aggregator.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Base configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SIGNED_ENTITY_TYPES=**YOUR_SIGNED_ENTITY_TYPES**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SERVER_PORT=**YOUR_SERVER_PORT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">PUBLIC_SERVER_URL=**YOUR_PUBLIC_SERVER_URL**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">LEADER_AGGREGATOR_ENDPOINT=**YOUR_LEADER_AGGREGATOR_ENDPOINT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RUN_INTERVAL=**YOUR_RUN_INTERVAL**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">AGGREGATE_SIGNATURE_TYPE=**YOUR_AGGREGATE_SIGNATURE_TYPE**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">STORE_RETENTION_LIMIT=**YOUR_STORE_RETENTION_LIMIT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">NETWORK=**YOUR_NETWORK**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">NETWORK_MAGIC=**YOUR_NETWORK_MAGIC**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_NODE_SOCKET_PATH=**YOUR_CARDANO_NODE_SOCKET_PATH**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_NODE_VERSION=**YOUR_CARDANO_IMAGE_ID**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CHAIN_OBSERVER_TYPE=**YOUR_CHAIN_OBSERVER_TYPE**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_TYPE=**YOUR_ERA_READER_ADAPTER_TYPE**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_PARAMS=**YOUR_ERA_READER_ADAPTER_PARAMS**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">GENESIS_VERIFICATION_KEY=**YOUR_GENESIS_VERIFICATION_KEY**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DMQ_NODE_SOCKET_PATH=**YOUR_DMQ_NODE_SOCKET_PATH**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CUSTOM_ORIGIN_TAG_WHITE_LIST=**YOUR_CUSTOM_ORIGIN_TAG_WHITE_LIST**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<p>If you want to configure <strong>Optional</strong> parameters, append the following variables to the <code>/opt/mithril/mithril-aggregator.env</code> file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> &#x27;cat </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /opt/mithril/mithril-aggregator.env </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Optional configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">BLOCKFROST_PARAMETERS=**YOUR_BLOCKFROST_PARAMETERS**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SIGNER_IMPORTER_RUN_INTERVAL=**YOUR_SIGNER_IMPORTER_RUN_INTERVAL**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain">`</span><br></span></code></pre></div></div>
<p>If you want to support <strong>Cardano database v2</strong> certification, append the following variables to the <code>/opt/mithril/mithril-aggregator.env</code> file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> &#x27;cat </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /opt/mithril/mithril-aggregator.env </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Cardano database configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DB_DIRECTORY=**YOUR_DB_DIRECTORY**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DATA_STORES_DIRECTORY=**YOUR_DATA_STORES_DIRECTORY**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">GOOGLE_APPLICATION_CREDENTIALS_JSON=**YOUR_GOOGLE_APPLICATION_CREDENTIALS_JSON**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">GOOGLE_APPLICATION_CREDENTIALS_GCP_KMS_JSON=**YOUR_GOOGLE_APPLICATION_CREDENTIALS_GCP_KMS_JSON**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SNAPSHOT_UPLOADER_TYPE=**YOUR_SNAPSHOT_UPLOADER_TYPE**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SNAPSHOT_BUCKET_NAME=**YOUR_SNAPSHOT_BUCKET_NAME**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SNAPSHOT_USE_CDN_DOMAIN=**YOUR_SNAPSHOT_USE_CDN_DOMAIN**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SNAPSHOT_COMPRESSION_ALGORITHM=**YOUR_SNAPSHOT_COMPRESSION_ALGORITHM**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ZSTANDARD_PARAMETERS__LEVEL=**YOUR_ZSTANDARD_PARAMETERS__LEVEL**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ZSTANDARD_PARAMETERS__NUMBER_OF_WORKERS=**YOUR_ZSTANDARD_PARAMETERS__NUMBER_OF_WORKERS**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ANCILLARY_FILES_SIGNER_CONFIG=**YOUR_ANCILLARY_FILES_SIGNER_CONFIG**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain">`</span><br></span></code></pre></div></div>
<p>If you want to support <strong>Cardano transaction</strong> certification, append the following variables to the <code>/opt/mithril/mithril-aggregator.env</code> file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> &#x27;cat </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /opt/mithril/mithril-aggregator.env </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Cardano transactions configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_TRANSACTIONS_PROVER_CACHE_POOL_SIZE=**YOUR_CARDANO_TRANSACTIONS_PROVER_CACHE_POOL_SIZE**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_TRANSACTIONS_DATABASE_CONNECTION_POOL_SIZE=**YOUR_CARDANO_TRANSACTIONS_DATABASE_CONNECTION_POOL_SIZE**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain">`</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>release-preprod</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/mithril/mithril-aggregator.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Base configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SIGNED_ENTITY_TYPES=MithrilStakeDistribution,CardanoStakeDistribution,CardanoTransactions</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SERVER_PORT=8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">PUBLIC_SERVER_URL=https://aggregator.example.com/aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">LEADER_AGGREGATOR_ENDPOINT=https://aggregator.release-preprod.api.mithril.network/aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RUN_INTERVAL=60000</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">AGGREGATE_SIGNATURE_TYPE=Concatenation</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">STORE_RETENTION_LIMIT=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">NETWORK=preprod</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">NETWORK_MAGIC=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_NODE_SOCKET_PATH=/cardano/ipc/node.socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_NODE_VERSION=10.5.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CHAIN_OBSERVER_TYPE=pallas</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_TYPE=cardano-chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ERA_READER_ADAPTER_PARAMS={&quot;address&quot;: &quot;addr_test1qpkyv2ws0deszm67t840sdnruqgr492n80g3y96xw3p2ksk6suj5musy6w8lsg3yjd09cnpgctc2qh386rtxphxt248qr0npnx&quot;, &quot;verification_key&quot;: &quot;5b35352c3232382c3134342c38372c3133382c3133362c34382c382c31342c3138372c38352c3134382c39372c3233322c3235352c3232392c33382c3234342c3234372c3230342c3139382c31332c33312c3232322c32352c3136342c35322c3130322c39312c3132302c3230382c3134375d&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DMQ_NODE_SOCKET_PATH=/dmq/ipc/node.socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CUSTOM_ORIGIN_TAG_WHITE_LIST=EXPLORER,BENCHMARK,CI,NA</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div><p>If you want to configure <strong>Optional</strong> parameters, append the following variables to the <code>/opt/mithril/mithril-aggregator.env</code> file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt;&gt; /opt/mithril/mithril-aggregator.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Optional configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">BLOCKFROST_PARAMETERS={&quot;project_id&quot;:&quot;preprodWuV1ICdtOWfZYfdcxpZ0tsS1N9rVZomQ&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SIGNER_IMPORTER_RUN_INTERVAL=720</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div><p>If you want to support the <strong>Cardano database</strong> certification, append the following variables to the <code>/opt/mithril/mithril-aggregator.env</code> file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt;&gt; /opt/mithril/mithril-aggregator.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Cardano database configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DB_DIRECTORY=/cardano/db</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DATA_STORES_DIRECTORY=/opt/mithril/stores</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">GOOGLE_APPLICATION_CREDENTIALS_JSON=**YOUR_SECRET**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">GOOGLE_APPLICATION_CREDENTIALS_GCP_KMS_JSON=**YOUR_SECRET**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SNAPSHOT_UPLOADER_TYPE=local</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SNAPSHOT_BUCKET_NAME=mithril-snapshots</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SNAPSHOT_USE_CDN_DOMAIN=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">SNAPSHOT_COMPRESSION_ALGORITHM=zstandard</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ZSTANDARD_PARAMETERS__LEVEL=9</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ZSTANDARD_PARAMETERS__NUMBER_OF_WORKERS=4</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ANCILLARY_FILES_SIGNER_CONFIG={&quot;type&quot;: &quot;secret-key&quot;, &quot;secret_key&quot;: &quot;**YOUR_SECRET**&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div><p>If you want to support <strong>Cardano transaction</strong> certification, append the following variables to the <code>/opt/mithril/mithril-aggregator.env</code> file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt;&gt; /opt/mithril/mithril-aggregator.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"># Cardano transactions configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_TRANSACTIONS_PROVER_CACHE_POOL_SIZE=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CARDANO_TRANSACTIONS_DATABASE_CONNECTION_POOL_SIZE=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<p>Then, create a <code>/etc/systemd/system/mithril-aggregator.service</code> description file for the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /etc/systemd/system/mithril-aggregator.service &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Description=Mithril aggregator service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">StartLimitIntervalSec=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RestartSec=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">User=cardano</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EnvironmentFile=/opt/mithril/mithril-aggregator.env</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ExecStart=/opt/mithril/mithril-aggregator -vvv</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">WantedBy=multi-user.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<p>Reload the service configuration (optional):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span></code></pre></div></div>
<p>Then, start the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start mithril-aggregator</span><br></span></code></pre></div></div>
<p>Register the service to start on boot:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> mithril-aggregator</span><br></span></code></pre></div></div>
<p>Monitor the status of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status mithril-aggregator.service</span><br></span></code></pre></div></div>
<p>Finally, monitor the logs of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /var/log/syslog </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> mithril-aggregator</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="activate-a-prometheus-endpoint">Activate a Prometheus endpoint<a href="#activate-a-prometheus-endpoint" class="hash-link" aria-label="Direct link to Activate a Prometheus endpoint" title="Direct link to Activate a Prometheus endpoint" translate="no">‚Äã</a></h3>
<p>The Mithril aggregator node can expose basic metrics on a Prometheus endpoint, which is not activated by default.</p>
<table><thead><tr><th>Metrics</th><th>Description</th></tr></thead><tbody><tr><td><strong>mithril_aggregator_certificate_detail_total_served_since_startup</strong></td><td>Certificate details served since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_detail_cardano_db_total_served_since_startup</strong></td><td>Number of Cardano immutable files full artifact details served since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_cardano_db_total_restoration_since_startup</strong></td><td>Number of Cardano immutable files full restorations since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_cardano_db_immutable_files_restored_since_startup</strong></td><td>Number of Cardano immutable files restored since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_cardano_db_ancillary_files_restored_since_startup</strong></td><td>Number of Cardano ancillary files restored since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_cardano_db_complete_restoration_since_startup</strong></td><td>Number of complete Cardano database restorations since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_cardano_db_partial_restoration_since_startup</strong></td><td>Number of partial Cardano database restorations since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_detail_cardano_database_total_served_since_startup</strong></td><td>Number of Cardano database artifact details served since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_detail_mithril_stake_distribution_total_served_since_startup</strong></td><td>Number of Mithril stake distribution artifact details served since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_detail_cardano_stake_distribution_total_served_since_startup</strong></td><td>Number of Cardano stake distribution artifact details served since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_detail_cardano_transaction_total_served_since_startup</strong></td><td>Number of Cardano transaction artifact details served since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_proof_cardano_transaction_total_proofs_served_since_startup</strong></td><td>Number of Cardano transaction proofs served since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_proof_cardano_transaction_total_transactions_served_since_startup</strong></td><td>Number of Cardano transaction hashes requested for proof since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_signer_registration_total_received_since_startup</strong></td><td>Number of signer registrations received since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_signer_registration_total_successful_since_startup</strong></td><td>Number of successful signer registrations received since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_signature_registration_total_received_since_startup</strong></td><td>Number of signature registrations received since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_signature_registration_total_successful_since_startup</strong></td><td>Number of successful signature registrations received since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_certificate_total_produced_since_startup</strong></td><td>Number of certificates produced since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_cardano_db_total_produced_since_startup</strong></td><td>Number of Cardano immutable files full artifacts produced since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_cardano_database_total_produced_since_startup</strong></td><td>Number of Cardano database artifacts produced since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_mithril_stake_distribution_total_produced_since_startup</strong></td><td>Number of Mithril stake distribution artifacts produced since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_cardano_stake_distribution_total_produced_since_startup</strong></td><td>Number of Cardano stake distribution artifacts produced since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_artifact_cardano_transaction_total_produced_since_startup</strong></td><td>Number of Cardano transaction artifacts produced since startup on a Mithril aggregator node</td></tr><tr><td><strong>mithril_aggregator_runtime_cycle_success_since_startup</strong></td><td>Number of successful runtime cycles since startup on a Mithril aggregator</td></tr><tr><td><strong>mithril_aggregator_runtime_cycle_total_since_startup</strong></td><td>Number of runtime cycles since startup on a Mithril aggregator</td></tr></tbody></table>
<p>To expose metrics on the endpoint, append the following environment variable to your environment file. In that case, the metrics server will listen on the <code>9090</code> port:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> &#x27;cat </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /opt/mithril/mithril-aggregator.env </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ENABLE_METRICS_SERVER=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain">`</span><br></span></code></pre></div></div>
<p>You can also specify a custom listen IP address and port for the metrics server:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> &#x27;cat </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /opt/mithril/mithril-aggregator.env </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ENABLE_METRICS_SERVER=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">METRICS_SERVER_IP=**YOUR_METRICS_SERVER_IP**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">METRICS_SERVER_PORT=**YOUR_METRICS_SERVER_PORT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain">`</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example that reproduces the default configuration for the Prometheus server:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> &#x27;cat </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /opt/mithril/mithril-aggregator.env </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ENABLE_METRICS_SERVER=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">METRICS_SERVER_IP=0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">METRICS_SERVER_PORT=9090</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain">`</span><br></span></code></pre></div></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>When activated, the metrics endpoint will be accessible to the <code>http://**YOUR_METRICS_SERVER_IP**:**YOUR_METRICS_SERVER_PORT**/metrics</code> location, which translates to <a href="http://0.0.0.0:9090/metrics" target="_blank" rel="noopener noreferrer" class=""><code>http://0.0.0.0:9090/metrics</code></a> with the default configuration.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This <a href="https://grafana.com/grafana/dashboards/22165-mithril-aggregator/" target="_blank" rel="noopener noreferrer" class="">Grafana template</a> makes it easy to set up a dashboard for this Prometheus endpoint (ID 22165).</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="set-up-the-ssl-certificate-traefik">Set up the SSL certificate (Traefik)<a href="#set-up-the-ssl-certificate-traefik" class="hash-link" aria-label="Direct link to Set up the SSL certificate (Traefik)" title="Direct link to Set up the SSL certificate (Traefik)" translate="no">‚Äã</a></h2>
<p>An aggregator must expose a TLS/SSL endpoint to securely communicate with Mithril signers. You can use a self-signed certificate or a certificate issued by a trusted Certificate Authority (CA).</p>
<p>We recommend using a reverse proxy such as <a href="https://doc.traefik.io/traefik/" target="_blank" rel="noopener noreferrer" class="">Traefik</a>, which can automatically generate and renew SSL certificates using <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer" class="">Let&#x27;s Encrypt</a> at no charge.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Here is the needed information to set up Traefik:</p><ul>
<li class=""><code>**YOUR_TRAEFIK_HTTP_PORT**</code>: replace with the HTTP port for Traefik (typically <code>80</code>)</li>
<li class=""><code>**YOUR_TRAEFIK_HTTPS_PORT**</code>: replace with the HTTPS port for Traefik (typically <code>443</code>)</li>
<li class=""><code>**YOUR_DOMAIN_NAME**</code>: replace with your aggregator&#x27;s domain name (eg, <code>aggregator.example.com</code>)</li>
<li class=""><code>**YOUR_EMAIL**</code>: replace with your email address for Let&#x27;s Encrypt notifications</li>
<li class=""><code>**YOUR_AGGREGATOR_PORT**</code>: replace with the port your Mithril aggregator listens on (from <code>SERVER_PORT</code> in the aggregator environment file).</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an <strong>example</strong> set of values that will be used in this guide in the <strong>tip</strong> boxes to illustrate some commands:</p><ul>
<li class=""><strong>YOUR_TRAEFIK_HTTP_PORT</strong>: <code>80</code></li>
<li class=""><strong>YOUR_TRAEFIK_HTTPS_PORT</strong>: <code>443</code></li>
<li class=""><strong>YOUR_DOMAIN_NAME</strong>: <code>aggregator.example.com</code></li>
<li class=""><strong>YOUR_EMAIL</strong>: <code>admin@example.com</code></li>
<li class=""><strong>YOUR_AGGREGATOR_PORT</strong>: <code>8080</code>.</li>
</ul></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="download-the-pre-built-binary-1">Download the pre-built binary<a href="#download-the-pre-built-binary-1" class="hash-link" aria-label="Direct link to Download the pre-built binary" title="Direct link to Download the pre-built binary" translate="no">‚Äã</a></h3>
<p>To download the latest released version of Traefik, first determine the latest version:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">TRAEFIK_VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">curl</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable parameter variable" style="color:#36acaa">-s</span><span class="token variable" style="color:#36acaa"> https://api.github.com/repos/traefik/traefik/releases/latest </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">grep</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;&quot;tag_name&quot;:&#x27;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">sed</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable parameter variable" style="color:#36acaa">-E</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;s/.*&quot;v([^&quot;]+)&quot;.*/\1/&#x27;</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre></div></div>
<p>Then, download the binary:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-L</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> traefik.tar.gz https://github.com/traefik/traefik/releases/download/v</span><span class="token variable" style="color:#36acaa">${TRAEFIK_VERSION}</span><span class="token plain">/traefik_v</span><span class="token variable" style="color:#36acaa">${TRAEFIK_VERSION}</span><span class="token plain">_linux_amd64.tar.gz</span><br></span></code></pre></div></div>
<p>Extract the archive:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-xzf</span><span class="token plain"> traefik.tar.gz</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-the-service-1">Installing the service<a href="#installing-the-service-1" class="hash-link" aria-label="Direct link to Installing the service" title="Direct link to Installing the service" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="make-the-binary-executable">Make the binary executable<a href="#make-the-binary-executable" class="hash-link" aria-label="Direct link to Make the binary executable" title="Direct link to Make the binary executable" translate="no">‚Äã</a></h4>
<p>To make the binary executable, run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> +x traefik</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="move-the-executable-1">Move the executable<a href="#move-the-executable-1" class="hash-link" aria-label="Direct link to Move the executable" title="Direct link to Move the executable" translate="no">‚Äã</a></h4>
<p>To move the executable to /opt/traefik, run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /opt/traefik</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> traefik /opt/traefik</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="prepare-the-configuration-directories">Prepare the configuration directories<a href="#prepare-the-configuration-directories" class="hash-link" aria-label="Direct link to Prepare the configuration directories" title="Direct link to Prepare the configuration directories" translate="no">‚Äã</a></h4>
<p>Create the necessary directories for Traefik configuration and certificates:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /opt/traefik/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /opt/traefik/letsencrypt</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="prepare-the-static-configuration-file">Prepare the static configuration file<a href="#prepare-the-static-configuration-file" class="hash-link" aria-label="Direct link to Prepare the static configuration file" title="Direct link to Prepare the static configuration file" translate="no">‚Äã</a></h4>
<p>Create a <code>/opt/traefik/traefik.yml</code> static configuration file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/traefik/traefik.yml &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">entryPoints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  web:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    address: &quot;:**YOUR_TRAEFIK_HTTP_PORT**&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      redirections:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        entryPoint:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          to: websecure</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          scheme: https</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  websecure:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    address: &quot;:**YOUR_TRAEFIK_HTTPS_PORT**&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      tls:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        certResolver: letsencrypt</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">certificatesResolvers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  letsencrypt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    acme:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      email: **YOUR_EMAIL**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      storage: /opt/traefik/letsencrypt/acme.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      httpChallenge:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        entryPoint: web</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">providers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    directory: /opt/traefik/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    watch: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">log:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  level: INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">accessLog: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/traefik/traefik.yml &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">entryPoints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  web:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    address: &quot;:80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      redirections:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        entryPoint:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          to: websecure</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          scheme: https</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  websecure:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    address: &quot;:443&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      tls:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        certResolver: letsencrypt</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">certificatesResolvers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  letsencrypt:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    acme:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      email: admin@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      storage: /opt/traefik/letsencrypt/acme.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      httpChallenge:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        entryPoint: web</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">providers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    directory: /opt/traefik/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    watch: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">log:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  level: INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">accessLog: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="prepare-the-dynamic-configuration-file">Prepare the dynamic configuration file<a href="#prepare-the-dynamic-configuration-file" class="hash-link" aria-label="Direct link to Prepare the dynamic configuration file" title="Direct link to Prepare the dynamic configuration file" translate="no">‚Äã</a></h4>
<p>Create a <code>/opt/traefik/config/dynamic.yml</code> dynamic configuration file to route traffic to the Mithril aggregator:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/traefik/config/dynamic.yml &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  routers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    mithril-aggregator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      rule: &quot;Host(\`**YOUR_DOMAIN_NAME**\`)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      service: mithril-aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      entryPoints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - websecure</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      tls:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        certResolver: letsencrypt</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    mithril-aggregator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      loadBalancer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        servers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          - url: &quot;http://localhost:**YOUR_AGGREGATOR_PORT**&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/traefik/config/dynamic.yml &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  routers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    mithril-aggregator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      rule: &quot;Host(\`aggregator.example.com\`)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      service: mithril-aggregator</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      entryPoints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        - websecure</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      tls:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        certResolver: letsencrypt</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    mithril-aggregator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      loadBalancer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        servers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          - url: &quot;http://localhost:8080&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="prepare-the-acmejson-file">Prepare the acme.json file<a href="#prepare-the-acmejson-file" class="hash-link" aria-label="Direct link to Prepare the acme.json file" title="Direct link to Prepare the acme.json file" translate="no">‚Äã</a></h4>
<p>Create and secure the ACME certificates file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> /opt/traefik/letsencrypt/acme.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">600</span><span class="token plain"> /opt/traefik/letsencrypt/acme.json</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="create-the-service-user">Create the service user<a href="#create-the-service-user" class="hash-link" aria-label="Direct link to Create the service user" title="Direct link to Create the service user" translate="no">‚Äã</a></h4>
<p>Create a dedicated system user for Traefik:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useradd</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> /usr/sbin/nologin traefik</span><br></span></code></pre></div></div>
<p>Set appropriate ownership for the Traefik directories:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-R</span><span class="token plain"> traefik:traefik /opt/traefik</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="set-up-the-service-1">Set up the service<a href="#set-up-the-service-1" class="hash-link" aria-label="Direct link to Set up the service" title="Direct link to Set up the service" translate="no">‚Äã</a></h4>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><ul>
<li class=""><code>User=traefik</code>:
Replace this value with the correct user if you use a different username. The service uses Linux capabilities (<code>CAP_NET_BIND_SERVICE</code>) to allow the non-root user to bind to privileged ports (80 and 443) without requiring full root privileges.</li>
</ul></div></div>
<p>Create a <code>/etc/systemd/system/traefik.service</code> description file for the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /etc/systemd/system/traefik.service &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Description=Traefik reverse proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">After=network-online.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Wants=network-online.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">StartLimitIntervalSec=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RestartSec=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">User=traefik</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Group=traefik</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">CapabilityBoundingSet=CAP_NET_BIND_SERVICE</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">AmbientCapabilities=CAP_NET_BIND_SERVICE</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ProtectHome=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ProtectSystem=full</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">PrivateTmp=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">NoNewPrivileges=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ExecStart=/opt/traefik/traefik --configFile=/opt/traefik/traefik.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">WantedBy=multi-user.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<p>Reload the service configuration (optional):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span></code></pre></div></div>
<p>Then, start the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start traefik</span><br></span></code></pre></div></div>
<p>Register the service to start on boot:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> traefik</span><br></span></code></pre></div></div>
<p>Monitor the status of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status traefik.service</span><br></span></code></pre></div></div>
<p>Finally, monitor the logs of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /var/log/syslog </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> traefik</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Make sure your domain name points to your server&#x27;s public IP address and that ports 80 and 443 are accessible from the internet for Let&#x27;s Encrypt certificate validation and HTTPS access.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="set-up-the-dmq-node-unstable">Set up the DMQ node (unstable)<a href="#set-up-the-dmq-node-unstable" class="hash-link" aria-label="Direct link to Set up the DMQ node (unstable)" title="Direct link to Set up the DMQ node (unstable)" translate="no">‚Äã</a></h2>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>The DMQ node setup is currently <strong>unstable</strong> and not suitable for production use.</p><p>During the stabilization and ramp-up phase of the DMQ network:</p><ul>
<li class="">Signatures are still sent to the central aggregator (using the DMQ node is harmless)</li>
<li class="">This section is subject to frequent changes.</li>
</ul></div></div>
<p>The DMQ node supports the implementation of a <strong>Decentralized Message Queue</strong> (DMQ) for Mithril. The DMQ protocol allows Mithril signers to exchange signatures in a decentralized manner, enhancing the robustness and scalability of the Mithril networks. Once stabilized and deployed on a majority of SPOs on a Mithril network, the DMQ protocol will allow multiple aggregators to operate simultaneously, improving the overall availability of the Mithril protocol. The DMQ protocol is fully described in the <a href="https://cips.cardano.org/cip/CIP-0137" target="_blank" rel="noopener noreferrer" class="">CIP-0137</a>.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><ul>
<li class="">Here is the needed information to set up a DMQ node:<!-- -->
<ul>
<li class=""><code>**YOUR_DMQ_NODE_SOCKET_PATH**</code>: replace with the path to the IPC file of the DMQ node</li>
<li class=""><code>**YOUR_CARDANO_NODE_SOCKET_PATH**</code>: replace with the path to the IPC file of the Cardano node</li>
<li class=""><code>**YOUR_CARDANO_NETWORK_MAGIC**</code>: replace with the network magic number of your Cardano network</li>
<li class=""><code>**YOUR_DMQ_NODE_PUBLIC_ADDRESS**</code>: replace with the <strong>public</strong> IP address of your DMQ node</li>
<li class=""><code>**YOUR_DMQ_NODE_PORT**</code>: replace with the listening port of your DMQ node</li>
<li class=""><code>**YOUR_DMQ_BOOTSTRAP_PEER_ADDRESS**</code>: replace with the IP address of your DMQ bootstrap peer (the address can be found in the <a class="" href="/doc/next/manual/getting-started/network-configurations">Mithril networks</a> table)</li>
<li class=""><code>**YOUR_DMQ_BOOTSTRAP_PEER_PORT**</code>: replace with the listening port of your DMQ bootstrap peer (the value can be found in the <a class="" href="/doc/next/manual/getting-started/network-configurations">Mithril networks</a> table).</li>
</ul>
</li>
</ul></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an <strong>example</strong> set of values for <strong>pre-release-preview</strong> that will be used in this guide in the <strong>tip</strong> boxes to illustrate some commands:</p><ul>
<li class=""><strong>YOUR_DMQ_NODE_SOCKET_PATH</strong>: <code>/dmq/ipc/node.socket</code></li>
<li class=""><strong>YOUR_CARDANO_NODE_SOCKET_PATH</strong>: <code>/cardano/ipc/node.socket</code></li>
<li class=""><strong>YOUR_CARDANO_NETWORK_MAGIC</strong>: <code>2</code></li>
<li class=""><strong>YOUR_DMQ_NODE_PUBLIC_ADDRESS</strong>: <code>34.14.65.160</code></li>
<li class=""><strong>YOUR_DMQ_NODE_PORT</strong>: <code>6161</code></li>
<li class=""><strong>YOUR_DMQ_BOOTSTRAP_PEER_ADDRESS</strong>: <code>34.76.22.193</code></li>
<li class=""><strong>YOUR_DMQ_BOOTSTRAP_PEER_PORT</strong>: <code>11001</code>.</li>
</ul></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="download-the-pre-built-binary-2">Download the pre-built binary<a href="#download-the-pre-built-binary-2" class="hash-link" aria-label="Direct link to Download the pre-built binary" title="Direct link to Download the pre-built binary" translate="no">‚Äã</a></h3>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>As we are still in a testing stage, we only support the <code>pre-release-preview</code> network.</p><p>You can use these parameters for the <strong>pre-release-preview</strong> network:</p><ul>
<li class=""><strong>DMQ_RELEASE_URL</strong>: <code>https://github.com/IntersectMBO/dmq-node/releases/download/0.2.0.0-pre-7/dmq-node-linux.tar.gz</code></li>
</ul><p><em>These URLs may change in the future; please refer to this page for the latest released version of the DMQ node binary.</em></p></div></div>
<p>To download the latest released version of the DMQ node binary, run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--fail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-sL</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> dmq-node.tar.gz **DMQ_RELEASE_URL**</span><br></span></code></pre></div></div>
<p>Then, extract the archive:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-xzf</span><span class="token plain"> dmq-node.tar.gz --strip-components</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> result/bin</span><br></span></code></pre></div></div>
<p>And test that the binary works:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./dmq-node </span><span class="token parameter variable" style="color:#36acaa">--version</span><br></span></code></pre></div></div>
<p>You should see something like:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dmq-node version: </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">.0.0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-the-service-2">Installing the service<a href="#installing-the-service-2" class="hash-link" aria-label="Direct link to Installing the service" title="Direct link to Installing the service" translate="no">‚Äã</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="move-the-executable-2">Move the executable<a href="#move-the-executable-2" class="hash-link" aria-label="Direct link to Move the executable" title="Direct link to Move the executable" translate="no">‚Äã</a></h4>
<p>To move the executable to /opt/dmq, run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> /opt/dmq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> dmq-node /opt/dmq</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="prepare-the-configuration-file-of-the-dmq-node">Prepare the configuration file of the DMQ node<a href="#prepare-the-configuration-file-of-the-dmq-node" class="hash-link" aria-label="Direct link to Prepare the configuration file of the DMQ node" title="Direct link to Prepare the configuration file of the DMQ node" translate="no">‚Äã</a></h4>
<p>Create a <code>/opt/dmq/config.json</code> configuration file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/dmq/config.json &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;CardanoNetworkMagic&quot;: **YOUR_CARDANO_NETWORK_MAGIC**,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;CardanoNodeSocket&quot;: &quot;**YOUR_CARDANO_NODE_SOCKET_PATH**&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;PeerSharing&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;LocalMsgSubmissionTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;LocalMsgNotificationTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;ConnectionManagerTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;DiffusionTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;InboundGovernorTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;LocalInboundGovernorTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;PeerSelectionTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;PeerSelectionCounters&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionLogicTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionClientTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionServerTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionClientProtocolTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionServerProtocolTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;MuxTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;ChannelTracer&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;DebugPeerSelectionTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;ValidationTracer&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>pre-release-preview</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/dmq/config.json &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;CardanoNetworkMagic&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;CardanoNodeSocket&quot;: &quot;/cardano/ipc/node.socket&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;PeerSharing&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;LocalMsgSubmissionTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;LocalMsgNotificationTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;ConnectionManagerTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;DiffusionTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;InboundGovernorTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;LocalInboundGovernorTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;PeerSelectionTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;PeerSelectionCounters&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionLogicTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionClientTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionServerTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionClientProtocolTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;SigSubmissionServerProtocolTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;MuxTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;ChannelTracer&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;DebugPeerSelectionTracer&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;ValidationTracer&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="prepare-the-topology-file-for-the-dmq-node">Prepare the topology file for the DMQ node<a href="#prepare-the-topology-file-for-the-dmq-node" class="hash-link" aria-label="Direct link to Prepare the topology file for the DMQ node" title="Direct link to Prepare the topology file for the DMQ node" translate="no">‚Äã</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The topology file of the DMQ node follows a similar format to the Cardano node topology file. More information is available at <a href="https://developers.cardano.org/docs/get-started/infrastructure/node/topology/" target="_blank" rel="noopener noreferrer" class="">Cardano node topology</a>.</p></div></div>
<ul>
<li class="">Create a <code>/opt/dmq/topology.json</code> configuration file:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/dmq/topology.json &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;bootstrapPeers&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;localRoots&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;accessPoints&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          &quot;address&quot;: &quot;**YOUR_DMQ_BOOTSTRAP_PEER_ADDRESS**&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          &quot;port&quot;: **YOUR_DMQ_BOOTSTRAP_PEER_PORT**,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;advertise&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;trustable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;valency&quot;: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;peerSnapshotFile&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;publicRoots&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;accessPoints&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;advertise&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>pre-release-preview</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /opt/dmq/topology.json &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;bootstrapPeers&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;localRoots&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;accessPoints&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          &quot;address&quot;: &quot;34.76.22.193&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          &quot;port&quot;: 11001,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;advertise&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;trustable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;valency&quot;: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;peerSnapshotFile&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  &quot;publicRoots&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;accessPoints&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      &quot;advertise&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="set-up-the-service-2">Set up the service<a href="#set-up-the-service-2" class="hash-link" aria-label="Direct link to Set up the service" title="Direct link to Set up the service" translate="no">‚Äã</a></h4>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><ul>
<li class=""><code>User=cardano</code>:
Replace this value with the correct user. We assume that the user running the <strong>Cardano node</strong> is <code>cardano</code>. The <strong>DMQ node</strong> must imperatively run with the same user.</li>
</ul></div></div>
<ul>
<li class="">Create a <code>/etc/systemd/system/dmq-aggregator.service</code> description file for the service:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /etc/systemd/system/dmq-aggregator.service &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Description=DMQ aggregator service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">StartLimitIntervalSec=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RestartSec=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">User=cardano</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ExecStart=/opt/dmq/dmq-node --configuration-file /opt/dmq/config.json --topology-file /opt/dmq/topology.json --local-socket **YOUR_DMQ_NODE_SOCKET_PATH** --host-addr **YOUR_DMQ_NODE_PUBLIC_ADDRESS** --port **YOUR_DMQ_NODE_PORT**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">WantedBy=multi-user.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>pre-release-preview</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt; /etc/systemd/system/dmq-aggregator.service &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Description=DMQ aggregator service</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">StartLimitIntervalSec=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">RestartSec=60</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">User=cardano</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">ExecStart=/opt/dmq/dmq-node --configuration-file /opt/dmq/config.json --topology-file /opt/dmq/topology.json --local-socket /dmq/ipc/node.socket --host-addr 34.14.65.160 --port 11001</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">WantedBy=multi-user.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<p>Reload the service configuration (optional):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span></code></pre></div></div>
<p>Then, start the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start dmq-aggregator</span><br></span></code></pre></div></div>
<p>Register the service to start on boot:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> dmq-aggregator</span><br></span></code></pre></div></div>
<p>Monitor the status of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status dmq-aggregator.service</span><br></span></code></pre></div></div>
<p>Finally, monitor the logs of the service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /var/log/syslog </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> dmq-aggregator</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="update-the-configuration-of-the-mithril-aggregator">Update the configuration of the Mithril aggregator<a href="#update-the-configuration-of-the-mithril-aggregator" class="hash-link" aria-label="Direct link to Update the configuration of the Mithril aggregator" title="Direct link to Update the configuration of the Mithril aggregator" translate="no">‚Äã</a></h3>
<p>If you have set up the DMQ node, the Mithril aggregator must be configured to use it. Add the DMQ node socket path to the aggregator configuration:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt;&gt; /opt/mithril/mithril-aggregator.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DMQ_NODE_SOCKET_PATH=**YOUR_DMQ_NODE_SOCKET_PATH**</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Here is an example of the aforementioned command created with the example set for <code>pre-release-preview</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-c</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cat &gt;&gt; /opt/mithril/mithril-aggregator.env &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">DMQ_NODE_SOCKET_PATH=/dmq/ipc/node.socket</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF&#x27;</span><br></span></code></pre></div></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="verify-the-mithril-aggregator-deployment">Verify the Mithril aggregator deployment<a href="#verify-the-mithril-aggregator-deployment" class="hash-link" aria-label="Direct link to Verify the Mithril aggregator deployment" title="Direct link to Verify the Mithril aggregator deployment" translate="no">‚Äã</a></h2>
<p>After installing and starting your Mithril aggregator node, you should verify that it is operating correctly. The verification process includes checking that your aggregator is:</p>
<ol>
<li class="">Synchronizing signer registrations with the leader aggregator</li>
<li class="">Synchronizing the certificate chain with the leader aggregator</li>
<li class="">Producing new certificates.</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>As a follower aggregator, your node will:</p><ul>
<li class="">Fetch and store signer registrations from the leader aggregator</li>
<li class="">Synchronize the certificate chain from the leader aggregator</li>
<li class="">Produce its own certificates using signatures collected via the DMQ protocol (once DMQ is stable and widely deployed).</li>
</ul></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="monitor-your-aggregator-with-the-mithril-explorer">Monitor your aggregator with the Mithril explorer<a href="#monitor-your-aggregator-with-the-mithril-explorer" class="hash-link" aria-label="Direct link to Monitor your aggregator with the Mithril explorer" title="Direct link to Monitor your aggregator with the Mithril explorer" translate="no">‚Äã</a></h3>
<p>You can monitor your aggregator&#x27;s activity using the <a href="https://mithril.network/explorer" target="_blank" rel="noopener noreferrer" class="">Mithril explorer</a>. To connect the explorer to your aggregator, use the following URL format:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://mithril.network/explorer/?aggregator=**URL_ENCODED_AGGREGATOR_ENDPOINT**</span><br></span></code></pre></div></div>
<p>For example, to monitor the <code>release-preprod</code> leader aggregator:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://mithril.network/explorer/?aggregator=https%3A%2F%2Faggregator.release-preprod.api.mithril.network%2Faggregator</span><br></span></code></pre></div></div>
<p>To monitor your own aggregator, replace the endpoint with your aggregator&#x27;s public URL (URL-encoded).</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><strong>Aggregator lifecycle during epochs:</strong></p><ul>
<li class=""><strong>At installation epoch</strong>: the aggregator will fetch the signer registrations for the next epoch from the leader aggregator</li>
<li class=""><strong>At epoch + 1</strong>: the aggregator will synchronize the certificate chain from the leader aggregator</li>
<li class=""><strong>At epoch + 2 and onwards</strong>: once the DMQ protocol is stable and widely deployed, the aggregator will start producing its own certificates using signatures collected via DMQ.</li>
</ul></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="register-your-aggregator-for-automatic-discovery-unstable">Register your aggregator for automatic discovery (unstable)<a href="#register-your-aggregator-for-automatic-discovery-unstable" class="hash-link" aria-label="Direct link to Register your aggregator for automatic discovery (unstable)" title="Direct link to Register your aggregator for automatic discovery (unstable)" translate="no">‚Äã</a></h3>
<p>If you want to make your follower aggregator publicly discoverable, you should:</p>
<ol>
<li class="">
<p><strong>Ensure your aggregator is accessible via HTTPS</strong> by setting up Traefik or another reverse proxy with a valid SSL certificate (as described in the <a href="#setup-the-ssl-certificate-traefik" class="">Set up the SSL certificate</a> section).</p>
</li>
<li class="">
<p><strong>Register your aggregator in the networks configuration</strong>. You can do this by:</p>
<ul>
<li class="">Opening an issue in the <a href="https://github.com/input-output-hk/mithril/issues" target="_blank" rel="noopener noreferrer" class="">Mithril GitHub repository</a></li>
<li class="">Or by creating a pull request that modifies the <a href="https://github.com/input-output-hk/mithril/blob/main/networks.json" target="_blank" rel="noopener noreferrer" class=""><code>networks.json</code></a> file and updates the <code>aggregators</code> field in the Cardano network you are targeting.</li>
</ul>
<p>Here is an example command to add an aggregator to the <code>release-preprod</code> network configuration:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jq </span><span class="token string" style="color:#e3116c">&#x27;.preprod.mithril-networks.release-preprodaggregators += [{&quot;name&quot;: &quot;My Aggregator&quot;, &quot;endpoint&quot;: &quot;https://aggregator.example.com/aggregator&quot;}]&#x27;</span><span class="token plain"> networks.json </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> networks.json.tmp </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> networks.json.tmp networks.json</span><br></span></code></pre></div></div>
</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Registering your aggregator for automatic discovery is optional. Your aggregator will still work and synchronize with the leader aggregator even if it&#x27;s not publicly registered.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/input-output-hk/mithril/edit/main/docs/website/root/manual/operate/run-aggregator-node.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doc/next/manual/operate/run-signer-node"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Run a Mithril signer node</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doc/next/manual/develop/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Develop</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#hardware" class="table-of-contents__link toc-highlight">Hardware</a></li><li><a href="#set-up-the-mithril-aggregator-node" class="table-of-contents__link toc-highlight">Set up the Mithril aggregator node</a><ul><li><a href="#building-your-own-mithril-aggregator-executable" class="table-of-contents__link toc-highlight">Building your own Mithril aggregator executable</a></li><li><a href="#download-the-pre-built-binary" class="table-of-contents__link toc-highlight">Download the pre-built binary</a></li><li><a href="#verifying-the-binary" class="table-of-contents__link toc-highlight">Verifying the binary</a></li><li><a href="#installing-the-service" class="table-of-contents__link toc-highlight">Installing the service</a></li><li><a href="#activate-a-prometheus-endpoint" class="table-of-contents__link toc-highlight">Activate a Prometheus endpoint</a></li></ul></li><li><a href="#set-up-the-ssl-certificate-traefik" class="table-of-contents__link toc-highlight">Set up the SSL certificate (Traefik)</a><ul><li><a href="#download-the-pre-built-binary-1" class="table-of-contents__link toc-highlight">Download the pre-built binary</a></li><li><a href="#installing-the-service-1" class="table-of-contents__link toc-highlight">Installing the service</a></li></ul></li><li><a href="#set-up-the-dmq-node-unstable" class="table-of-contents__link toc-highlight">Set up the DMQ node (unstable)</a><ul><li><a href="#download-the-pre-built-binary-2" class="table-of-contents__link toc-highlight">Download the pre-built binary</a></li><li><a href="#installing-the-service-2" class="table-of-contents__link toc-highlight">Installing the service</a></li><li><a href="#update-the-configuration-of-the-mithril-aggregator" class="table-of-contents__link toc-highlight">Update the configuration of the Mithril aggregator</a></li></ul></li><li><a href="#verify-the-mithril-aggregator-deployment" class="table-of-contents__link toc-highlight">Verify the Mithril aggregator deployment</a><ul><li><a href="#monitor-your-aggregator-with-the-mithril-explorer" class="table-of-contents__link toc-highlight">Monitor your aggregator with the Mithril explorer</a></li><li><a href="#register-your-aggregator-for-automatic-discovery-unstable" class="table-of-contents__link toc-highlight">Register your aggregator for automatic discovery (unstable)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="bg-blue"><div class="pageContainer py-14 text-gray-extra-light"><div class="laptop:flex laptop:flex-row tablet:grid tablet:grid-cols-2 laptop:gap-[6.25rem] gap-y-7 flex flex-col text-sm pb-12 tablet:pb-[3.625rem]"><div class="flex flex-col gap-6"><div class="font-bold min-h-5">Contributing</div><ul class="flex flex-col gap-6"><li class="footer__item"><a href="https://github.com/input-output-hk/mithril/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="">Contributing guidelines</a></li><li class="footer__item"><a class="" href="/doc/adr">Architectural Decision Records</a></li></ul></div><div class="flex flex-col gap-6"><div class="font-bold min-h-5">Community</div><ul class="flex flex-col gap-6"><li class="footer__item"><a href="https://discord.gg/5kaErDKDRq" target="_blank" rel="noopener noreferrer" class="">Discord (#ask-mithril)</a></li><li class="footer__item"><a href="https://github.com/input-output-hk/mithril/discussions" target="_blank" rel="noopener noreferrer" class="">GitHub discussions</a></li><li class="footer__item"><a href="https://cardano.stackexchange.com/search?q=mithril" target="_blank" rel="noopener noreferrer" class="">Stack Exchange</a></li></ul></div><div class="flex flex-col gap-6"><div class="font-bold min-h-5">More</div><ul class="flex flex-col gap-6"><li class="footer__item"><a href="https://mithril.cronitorstatus.com/" target="_blank" rel="noopener noreferrer" class="">Mithril networks status</a></li><li class="footer__item"><a href="https://lookerstudio.google.com/s/mbL23-8gibI" target="_blank" rel="noopener noreferrer" class="">Mithril protocol insights</a></li><li class="footer__item"><a href="https://github.com/input-output-hk/mithril/wiki/Logbook" target="_blank" rel="noopener noreferrer" class="">Logbook</a></li><li class="footer__item"><a href="https://iohk.io/en/blog" target="_blank" rel="noopener noreferrer" class="">Input Output (Blog)</a></li></ul></div><div class="flex flex-col gap-6"><div class="font-bold min-h-5">Legal</div><ul class="flex flex-col gap-6"><li class="footer__item"><a href="https://static.iohk.io/terms/iog-privacy-policy.pdf" target="_blank" rel="noopener noreferrer" class="">Privacy policy</a></li><li class="footer__item"><a href="https://static.iohk.io/terms/iog-terms-and-conditions.pdf" target="_blank" rel="noopener noreferrer" class="">Terms and conditions</a></li></ul></div></div><div class="flex tablet:items-center gap-2 tablet:flex-row flex-col text-gray-dark tablet:justify-between tablet:pt-4 tablet:border-t border-t-gray-dark"><div class="margin-bottom--sm"><div class="flex items-center text-2xl tracking-[-0.01125rem] gap-1"><img src="/doc/img/mithril-logo-dark.svg" alt="Mithril. A complete guide." class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doc/img/mithril-logo-dark.svg" alt="Mithril. A complete guide." class="themedComponent_mlkZ themedComponent--dark_xIcU"><h4>Mithril</h4></div></div><div class="footer__copyright">Copyright ¬© 2026 IOG, Inc.</div></div></div></footer></div>
</body>
</html>