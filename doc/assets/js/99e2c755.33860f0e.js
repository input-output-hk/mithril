"use strict";(globalThis.webpackChunkmithril_doc=globalThis.webpackChunkmithril_doc||[]).push([[2292],{70989(e,i,t){t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"mithril/advanced/mithril-certification/cardano-stake-distribution","title":"Cardano stake distribution","description":"The Mithril protocol supports the certification of the Cardano stake distribution, allowing users to verify the actual stake held by one or more SPOs at a given Cardano epoch. This is particularly useful for bridges, sidechains, or other types of layer 2 protocols that need to rely on limited committees for their operations.","source":"@site/versioned_docs/version-maintained/mithril/advanced/mithril-certification/cardano-stake-distribution.md","sourceDirName":"mithril/advanced/mithril-certification","slug":"/mithril/advanced/mithril-certification/cardano-stake-distribution","permalink":"/doc/mithril/advanced/mithril-certification/cardano-stake-distribution","draft":false,"unlisted":false,"editUrl":"https://github.com/input-output-hk/mithril/edit/main/docs/website/root/mithril/advanced/mithril-certification/cardano-stake-distribution.md","tags":[],"version":"maintained","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Cardano stake distribution"},"sidebar":"mithrilSideBar","previous":{"title":"Cardano transactions","permalink":"/doc/mithril/advanced/mithril-certification/cardano-transactions"},"next":{"title":"Cardano node database","permalink":"/doc/mithril/advanced/mithril-certification/cardano-node-database"}}');var a=t(74848),s=t(28453);const r={sidebar_position:2,sidebar_label:"Cardano stake distribution"},o="Cardano stake distribution",d={},c=[{value:"Mithril certification",id:"mithril-certification",level:2},{value:"Message computation",id:"message-computation",level:3},{value:"Authenticity verification",id:"authenticity-verification",level:3}];function h(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.header,{children:(0,a.jsx)(i.h1,{id:"cardano-stake-distribution",children:"Cardano stake distribution"})}),"\n",(0,a.jsxs)(i.p,{children:["The Mithril protocol supports the certification of the ",(0,a.jsx)(i.strong,{children:"Cardano stake distribution"}),", allowing users to verify the actual stake held by one or more SPOs at a given Cardano epoch. This is particularly useful for bridges, sidechains, or other types of layer 2 protocols that need to rely on limited committees for their operations."]}),"\n",(0,a.jsx)(i.p,{children:"To achieve this, Mithril signers and aggregators independently compute a message representing the Cardano stake distribution and apply the Mithril protocol to jointly sign it."}),"\n",(0,a.jsxs)(i.p,{children:["A natural structure for the message is a ",(0,a.jsx)(i.strong,{children:"Merkle tree"}),", which is succinctly represented by its ",(0,a.jsx)(i.strong,{children:"Merkle root"})," (the actual signed message)."]}),"\n",(0,a.jsxs)(i.admonition,{type:"info",children:[(0,a.jsx)(i.p,{children:"The stake distribution is:"}),(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["Composed of ",(0,a.jsx)(i.code,{children:"~3,000"})," SPOs on the Cardano mainnet"]}),"\n",(0,a.jsx)(i.li,{children:"Computed at the epoch boundary with the following epoch (as it evolves during an epoch and is only final at the end of the epoch)."}),"\n"]})]}),"\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(45233).A+"",children:(0,a.jsx)(i.img,{alt:"Design of the certification of the Cardano stake distribution",src:t(62717).A+"",width:"1443",height:"692"})}),"\n",(0,a.jsx)("small",{children:(0,a.jsx)("center",{children:"Stake distribution snapshots done by the Cardano node"})})]}),"\n",(0,a.jsx)(i.h2,{id:"mithril-certification",children:"Mithril certification"}),"\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(87016).A+"",children:(0,a.jsx)(i.img,{alt:"Design of the certification of the Cardano stake distribution",src:t(24316).A+"",width:"1359",height:"735"})}),"\n",(0,a.jsx)("small",{children:(0,a.jsx)("center",{children:"End to end certification for Cardano transactions"})})]}),"\n",(0,a.jsx)(i.admonition,{type:"info",children:(0,a.jsxs)(i.p,{children:["Learn about the Mithril certification steps ",(0,a.jsx)(i.a,{href:"/doc/mithril/advanced/mithril-certification/",children:"here"}),"."]})}),"\n",(0,a.jsx)(i.h3,{id:"message-computation",children:"Message computation"}),"\n",(0,a.jsx)(i.p,{children:"The message is the Merkle root of the Merkle tree, where the leaves are the hashes of the tuple composed of:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsxs)(i.li,{children:["The ",(0,a.jsx)(i.strong,{children:"pool ID"}),", which is the unique identifier of an SPO in the Cardano network (computed as the hash of the Cardano pool's ",(0,a.jsx)(i.strong,{children:"cold verification key"}),", which is ",(0,a.jsx)(i.code,{children:"bech32"})," encoded, eg, ",(0,a.jsx)(i.code,{children:"pool1r0tln8nct3mpyvehgy6uu3cdlmjnmtr2fxjcqnfl6v0qg0we42e"}),")"]}),"\n",(0,a.jsxs)(i.li,{children:["The ",(0,a.jsx)(i.strong,{children:"stake"})," delegated to the SPO at the given epoch in ",(0,a.jsx)(i.code,{children:"lovelace"})," (",(0,a.jsx)(i.code,{children:"1 ada"})," = ",(0,a.jsx)(i.code,{children:"1,000,000 lovelace"}),")."]}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"The message computation is the same for both signers and aggregators."}),"\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(21006).A+"",children:(0,a.jsx)(i.img,{alt:"Design of the certification of the Cardano stake distribution",src:t(53266).A+"",width:"1377",height:"725"})}),"\n",(0,a.jsx)("small",{children:(0,a.jsx)("center",{children:"Message creation on the signers and aggregators"})})]}),"\n",(0,a.jsx)(i.admonition,{type:"info",children:(0,a.jsxs)(i.p,{children:["The Merkle tree inner nodes are computed with the ",(0,a.jsx)(i.code,{children:"BLAKE2s-256"})," hash function: the child bytes are concatenated and hashed to compute the parent node."]})}),"\n",(0,a.jsx)(i.h3,{id:"authenticity-verification",children:"Authenticity verification"}),"\n",(0,a.jsx)(i.p,{children:"Due to the relatively small size of the stake distribution, the computation of the Merkle tree is quick and can be performed on the client side:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"The client downloads the serialized Cardano stake distribution from an artifact delivered by an aggregator"}),"\n",(0,a.jsx)(i.li,{children:"The client computes the Merkle root (the message) and verifies that it is signed by a valid Mithril certificate."}),"\n"]}),"\n",(0,a.jsxs)(i.p,{children:[(0,a.jsx)(i.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(21006).A+"",children:(0,a.jsx)(i.img,{alt:"Design of the certification of the Cardano stake distribution",src:t(53266).A+"",width:"1377",height:"725"})}),"\n",(0,a.jsx)("small",{children:(0,a.jsx)("center",{children:"Message creation on the clients (same as on signers and aggregators)"})})]})]})}function l(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},45233(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/files/cardano-snapshots-a7a7d0c4d50f115f126a828f3219d086.jpg"},87016(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/files/end-to-end-process-684fe157038157427c3af63ab931f135.jpg"},21006(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/files/message-3bdc63405406f795f73e468150dc1d43.jpg"},62717(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/images/cardano-snapshots-a7a7d0c4d50f115f126a828f3219d086.jpg"},24316(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/images/end-to-end-process-684fe157038157427c3af63ab931f135.jpg"},53266(e,i,t){t.d(i,{A:()=>n});const n=t.p+"assets/images/message-3bdc63405406f795f73e468150dc1d43.jpg"},28453(e,i,t){t.d(i,{R:()=>r,x:()=>o});var n=t(96540);const a={},s=n.createContext(a);function r(e){const i=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(s.Provider,{value:i},e.children)}}}]);